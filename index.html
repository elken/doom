<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-04-30 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Config</title>
<meta name="author" content="Ellis Kenyő" />
<meta name="generator" content="Org Mode" />
<link rel='stylesheet' type='text/css' href='static/index.css' />
<link rel='shortcut icon' type='image/png' href='https://raw.githubusercontent.com/eccentric-j/doom-icon/master/cute-doom/src/doom.iconset/icon_32x32.png'>
<style>:root {--bg: #2E3440;
--fg: #ECEFF4;
--yellow: #EBCB8B; --bright-yellow: #edd29c;--red: #BF616A; --bright-red: #c87880;--black: #2E3440; --bright-black: #191C25;--green: #A3BE8C; --bright-green: #b0c79d;--blue: #81A1C1; --bright-blue: #93afca;--cyan: #88C0D0; --bright-cyan: #99c9d7;--white: grey90; --bright-white: #F0F4FC;--magenta: #B48EAD; --bright-magenta: #bf9eb9;--variable-pitch-font: 'Montserrat';
--fixed-pitch-font: 'Iosevka Nerd Font';}body { background: var(--bg); color: var(--fg); font-family: var(--variable-pitch-font);}pre { font-family: var(--fixed-pitch-font);}h1 {color: #81A1C1;font-weight: 700;}h2 {color: #B48EAD;font-weight: 700;}h3 {color: #5D80AE;font-weight: 700;}h4 {color: #a0b8d0;font-weight: 700;}h5 {color: #c6aac1;font-weight: 700;}nav li > a:before { content: '› '; vertical-align: 5%; color: #81A1C1;font-weight: 700;}nav li > a {color: #81A1C1;font-weight: 700;}nav li > ul > li > a:before { content: '› '; vertical-align: 5%; color: #B48EAD;font-weight: 700;}nav li > ul > li > a {color: #B48EAD;font-weight: 700;}nav li > ul > li > ul > li > a:before { content: '› '; vertical-align: 5%; color: #5D80AE;font-weight: 700;}nav li > ul > li > ul > li > a {color: #5D80AE;font-weight: 700;}nav li > ul > li > ul > li > ul > li > a:before { content: '› '; vertical-align: 5%; color: #a0b8d0;font-weight: 700;}nav li > ul > li > ul > li > ul > li > a {color: #a0b8d0;font-weight: 700;}nav li > ul > li > ul > li > ul > li > ul > li > a:before { content: '› '; vertical-align: 5%; color: #c6aac1;font-weight: 700;}nav li > ul > li > ul > li > ul > li > ul > li > a {color: #c6aac1;font-weight: 700;}nav li > ul > li > ul > li > ul > li > ul > li > ul > li > a:before { content: '› '; vertical-align: 5%; color: #c0d0e0;font-weight: 700;}nav li > ul > li > ul > li > ul > li > ul > li > ul > li > a {color: #c0d0e0;font-weight: 700;}.org-src-container {background: #373E4C;font-family: Monospace;}.org-highlight-quoted-symbol {color: #8FBCBB;font-weight: 700;}.org-highlight-quoted-quote {color: #81A1C1;font-weight: 700;}.org-highlight-numbers-number {color: #B48EAD;font-weight: 700;}.org-comment {color: #6f7787;font-weight: 700;}.org-comment-delimiter {color: #6f7787;font-weight: 700;}.org-string {color: #A3BE8C;}.org-doc {color: #78808f;}.org-doc-markup {color: #81A1C1;font-weight: 700;}.org-keyword {color: #81A1C1;font-weight: 700;}.org-builtin {color: #81A1C1;font-weight: 700;}.org-function-name {color: #88C0D0;font-weight: 700;}.org-variable-name {color: #D8DEE9;font-weight: 700;}.org-type {color: #8FBCBB;font-weight: 700;}.org-constant {color: #81A1C1;font-weight: 700;}.org-warning {color: #EBCB8B;font-weight: 700;}.org-negation-char {color: #81A1C1;font-weight: 700;}.org-preprocessor {color: #81A1C1;font-weight: 700;}.org-rainbow-delimiters-depth-1 {color: #81A1C1;}.org-rainbow-delimiters-depth-2 {color: #B48EAD;}.org-rainbow-delimiters-depth-3 {color: #A3BE8C;}.org-rainbow-delimiters-depth-4 {color: #5D80AE;}.org-rainbow-delimiters-depth-5 {color: #8FBCBB;}.org-rainbow-delimiters-depth-6 {color: #81A1C1;}.org-rainbow-delimiters-depth-7 {color: #B48EAD;}.org-rainbow-delimiters-depth-8 {color: #A3BE8C;}.org-rainbow-delimiters-depth-9 {color: #5D80AE;}pre.src-snippet::before { content: '» snippet'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }
          pre.src-snippet::after  { content: '«'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }pre.src-conf::before { content: '» conf'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }
          pre.src-conf::after  { content: '«'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }pre.src-elisp::before { content: '» emacs-lisp'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }
          pre.src-elisp::after  { content: '«'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }pre.src-emacs-lisp::before { content: '» emacs-lisp'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }
          pre.src-emacs-lisp::after  { content: '«'; display: block; color: #6f7787;background: #373E4C;font-weight: 700;font-family: Monospace; }h1:before { content: '› '; vertical-align: 5%; color: #81A1C1;font-weight: 700;}h2:before { content: '› '; vertical-align: 5%; color: #B48EAD;font-weight: 700;}h3:before { content: '› '; vertical-align: 5%; color: #5D80AE;font-weight: 700;}h4:before { content: '› '; vertical-align: 5%; color: #a0b8d0;font-weight: 700;}h5:before { content: '› '; vertical-align: 5%; color: #c6aac1;font-weight: 700;}a {color: #81A1C1;font-weight: 700;}a:visited {color: #ee82ee;font-weight: 700;}a:hover {color: #191C25;background: #81A1C1;}</style>
<script src='static/index.js'></script>
</head>
<body>
<main id="content" class="chameleon doom-nord">
<header>
<h1 class="title">Config</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgdd09182">FAQ</a></li>
<li><a href="#org30a1931">Globals</a>
<ul>
<li><a href="#org6ea6cc7">Constants and Variables</a>
<ul>
<li><a href="#orgb0a3b8a">Lexical binding</a></li>
<li><a href="#org323c42d">Default projectile path</a></li>
<li><a href="#org99a70bb">Lookup provider URLs</a></li>
<li><a href="#org7098217">Subword-mode</a></li>
<li><a href="#orgfa3857c">Auto-revert-mode</a></li>
<li><a href="#org68ff668">Prevent flickering</a></li>
<li><a href="#org988ab71">Clear snippets before loading</a></li>
<li><a href="#org7617433">Load env after reload</a></li>
<li><a href="#orge62c71e">Reload config without sync</a></li>
<li><a href="#org97d5569">Bury compile buffer</a></li>
<li><a href="#org7f613b1">Evil</a>
<ul>
<li><a href="#org7be5f3f">Splits</a></li>
<li><a href="#orgbdd4bdf">Fine undo</a></li>
<li><a href="#orgc318442">Global substitute</a></li>
<li><a href="#org6f292b9">Ignore visual text in the kill ring</a></li>
<li><a href="#org4cd1fa0">Use emacs binds in insert mode</a></li>
</ul>
</li>
<li><a href="#orgeef970a">Lispyville</a></li>
<li><a href="#org3d89aa3">Default scratch mode</a></li>
<li><a href="#org32869d9">Auth info</a></li>
<li><a href="#org4c2d2cd">fetch-auth-source</a></li>
<li><a href="#org60e12cd">Magit</a>
<ul>
<li><a href="#org072f94f">Forge</a></li>
</ul>
</li>
<li><a href="#org89f29ea">EShell</a>
<ul>
<li><a href="#org8035934">Prompt</a></li>
<li><a href="#org72cee0f">Settings</a></li>
</ul>
</li>
<li><a href="#org48d2b32">User setup</a></li>
<li><a href="#org4293a1d">vterm</a>
<ul>
<li><a href="#orgebb4526">Always compile</a></li>
<li><a href="#orgfa55c3b">Kill buffer</a></li>
<li><a href="#org72f8985">Fix <code>c-backspace</code></a></li>
<li><a href="#orgdc61436">Functions</a></li>
<li><a href="#orgb29c5b8">Multi-vterm</a></li>
<li><a href="#org4632e98">Ensure the shell is ZSH</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf1a59c6">Convert a URL to a valid package recipe</a></li>
</ul>
</li>
<li><a href="#org309c262">Keybindings</a>
<ul>
<li><a href="#org49f2aa9">Save</a></li>
<li><a href="#org6dc2507">Search</a></li>
<li><a href="#orge08ff30">Dired</a></li>
<li><a href="#orgc74b898">Journal</a></li>
</ul>
</li>
<li><a href="#org114c36a">Graphical setup</a>
<ul>
<li><a href="#org29bc588">Pixel-precision scrolling</a></li>
<li><a href="#orgd70d436">which-key</a></li>
<li><a href="#orgab0df6d">Marginalia</a>
<ul>
<li><a href="#org74a970c">Files</a></li>
</ul>
</li>
<li><a href="#org5e6c94b">Info pages</a></li>
<li><a href="#orge004975">Dashboard</a></li>
<li><a href="#org6dc7c67">Modeline</a></li>
<li><a href="#orga41138b">Fonts</a>
<ul>
<li><a href="#org436e437">Defaults</a></li>
<li><a href="#org7b1aa2b">Ligatures</a></li>
</ul>
</li>
<li><a href="#org6662a31">Theme</a></li>
<li><a href="#org89a5503">Banner</a></li>
<li><a href="#org4d2626c">Line Numbers</a></li>
<li><a href="#org7d8af36">GUI/Frame</a></li>
</ul>
</li>
<li><a href="#orgedea42d">Org Mode</a>
<ul>
<li><a href="#orgb49e3f7">fill-column</a></li>
<li><a href="#org546eb5e">Hook setup</a></li>
<li><a href="#orgc78a29f">org-directory</a></li>
<li><a href="#orgd43e914">Font setup</a></li>
<li><a href="#org9275f5a">Properties</a>
<ul>
<li><a href="#org071cd97">Allow property inheritance</a></li>
</ul>
</li>
<li><a href="#orga808831">Characters</a>
<ul>
<li><a href="#org4be7530">Headline bullets</a></li>
<li><a href="#org34fc480">Item bullets</a></li>
<li><a href="#org1cea920">Dropdown icon</a></li>
</ul>
</li>
<li><a href="#org93dea12">Keywords</a></li>
<li><a href="#org1469dd4">Agenda/Log</a>
<ul>
<li><a href="#org7a028a3">Show <code>DONE</code> tasks in agenda</a></li>
<li><a href="#orgf9d60f7">Timestamp done items</a></li>
<li><a href="#org5057f2e">Log items in the drawer</a></li>
</ul>
</li>
<li><a href="#orgd336180">Cycle</a></li>
<li><a href="#orge73720c">Folding</a></li>
<li><a href="#org912c6fe">Org-appear</a></li>
<li><a href="#org79a3cc3">Mixed pitch</a></li>
<li><a href="#org4a80801">Archive/Cleanup</a>
<ul>
<li><a href="#org6ca9ca6">Archive <code>DONE</code> tasks</a></li>
<li><a href="#orgf6c2ae9">Remove <code>KILL</code> tasks</a></li>
</ul>
</li>
<li><a href="#org3b88146">Show images</a></li>
<li><a href="#orgd855004">Autoexecute tangled shell files</a></li>
<li><a href="#org3e93b1e">Variable setup</a></li>
<li><a href="#orgf398fb7">Better snippets</a></li>
<li><a href="#orgcc29b15">Roam</a>
<ul>
<li><a href="#org1f7e56c">Templates</a></li>
</ul>
</li>
<li><a href="#org09a3c80">Capture</a>
<ul>
<li><a href="#org92f1a2f">Prettify</a></li>
<li><a href="#orga34004e">Templates</a></li>
</ul>
</li>
<li><a href="#org4f90531">Export</a>
<ul>
<li><a href="#org8340433">LaTeX</a>
<ul>
<li><a href="#org2c1af04">Preambles</a></li>
<li><a href="#org90432aa">Conditional features</a></li>
<li><a href="#org30592f3">Tectonic</a></li>
<li><a href="#org619eccb">Classes</a></li>
<li><a href="#org5213d45">Packages</a></li>
<li><a href="#org687ae0c">Pretty code blocks</a></li>
<li><a href="#orgd69c671">ox-chameleon</a></li>
<li><a href="#orgb8b0605">Beamer</a></li>
</ul>
</li>
<li><a href="#org83f4e20">(sub|super)script characters</a></li>
<li><a href="#org1d6e996">Auto-export</a></li>
</ul>
</li>
<li><a href="#org1cbe3d2">org-protocol</a></li>
</ul>
</li>
<li><a href="#orgfc0b961">Languages</a>
<ul>
<li><a href="#org49134b6">Clojure</a>
<ul>
<li><a href="#orgb9fed33">Epithet</a></li>
<li><a href="#orgd63438b">Portal</a></li>
</ul>
</li>
<li><a href="#orgd42ea67">Lua</a></li>
<li><a href="#org3523f14">LSP/DAP</a>
<ul>
<li><a href="#org2dbca38">Increase variable line length</a></li>
<li><a href="#org889d378">Improve completions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6d1751d">Snippets</a>
<ul>
<li><a href="#org6f7f65d">Snippet definitions</a>
<ul>
<li><a href="#orge579f2c">Org-mode</a>
<ul>
<li><a href="#orgf058329">__</a></li>
</ul>
</li>
<li><a href="#org2c6d0e6">slack-message-compose-buffer-mode</a>
<ul>
<li><a href="#orge291dc1">standup</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcef55a8">Packages</a>
<ul>
<li><a href="#orgd68487f">Disabled/unpin</a></li>
<li><a href="#org8b0dc54">embark-vc</a></li>
<li><a href="#orgdd4582b">prescient</a></li>
<li><a href="#org24b5ae8">Rainbow Identifiers</a>
<ul>
<li><a href="#org176670e"><span class="todo TODO">TODO</span> Fix in web-mode</a></li>
</ul>
</li>
<li><a href="#org69dbce7">Cucumber</a></li>
<li><a href="#org3585308">RPM Spec</a></li>
<li><a href="#org5c4de7d">Autothemer</a></li>
<li><a href="#orgf1ae943">Bamboo</a></li>
<li><a href="#orgd92966d">YADM</a>
<ul>
<li><a href="#orgd10c9ea">tramp-yadm</a></li>
</ul>
</li>
<li><a href="#org6685a59">Keychain</a></li>
<li><a href="#org3635b6d">Asciidoc</a></li>
<li><a href="#org587a0ae">Graphviz</a></li>
<li><a href="#orgff668cd">Exercism</a></li>
<li><a href="#orgd74d67e">litable</a></li>
</ul>
</li>
<li><a href="#org31774cf">Spelling</a></li>
<li><a href="#org0f8d36a">Local settings</a>
<ul>
<li><a href="#org76407c0">dotenv</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<figure id="org339d0a9">
<img src="images/banner.png" alt="banner.png">

</figure>

<p>
(icon courtesy of <a href="https://github.com/eccentric-j/doom-icon">https://github.com/eccentric-j/doom-icon</a>)
</p>

<p>
Below is my <a href="https://github.com/hlissner/doom-emacs">doom-emacs</a> config. Most of it isn&rsquo;t particularly original; snippets
from stackoverflow, modernemacs, <a href="https://github.com/daviwil">David Wilson</a> and <a href="https://github.com/tecosaur">Tecosaur</a>. Everything else will
be commented to the best of <i>my</i> ability.
</p>

<p>
Anything that&rsquo;s missing from here might also be located in <a href="archive.html">the archive</a>, so it&rsquo;s
worth skimming from there too.
</p>

<p>
Most of this cobbled mess is now mine, and if you do intend to use any of it it
would be nice if you mentioned me when doing so. It&rsquo;s just polite :)
</p>

<p>
Depends on Emacs 29 because of some super cool stuff, so if you&rsquo;re not using it
<span class="underline">please</span> don&rsquo;t open any issues about missing variables.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp" id="orgdf9312b"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<section id="outline-container-orgdd09182" class="outline-2">
<h2 id="orgdd09182">FAQ</h2>
<div class="outline-text-2" id="text-orgdd09182">
<p>
None yet because luckily nobody else has seen this spaghetti junction
</p>
</div>
</section>

<section id="outline-container-org30a1931" class="outline-2">
<h2 id="org30a1931">Globals</h2>
<div class="outline-text-2" id="text-org30a1931">
</div>
<div id="outline-container-org6ea6cc7" class="outline-3">
<h3 id="org6ea6cc7">Constants and Variables</h3>
<div class="outline-text-3" id="text-org6ea6cc7">
<p>
I could make a Bioshock Infinite joke here but I can&rsquo;t think of one. Wouldn&rsquo;t
think of one? Would have thought of one.
</p>
</div>

<div id="outline-container-orgb0a3b8a" class="outline-4">
<h4 id="orgb0a3b8a">Lexical binding</h4>
<div class="outline-text-4" id="text-orgb0a3b8a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">-*- lexical-binding: t; -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org323c42d" class="outline-4">
<h4 id="org323c42d">Default projectile path</h4>
<div class="outline-text-4" id="text-org323c42d">
<p>
I stick to the same convention for projects on every OS, so it makes sense to
tell projectile about it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> projectile-project-search-path <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"~/build"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org99a70bb" class="outline-4">
<h4 id="org99a70bb">Lookup provider URLs</h4>
<div class="outline-text-4" id="text-org99a70bb">
<p>
Majority of the default lookup providers are useless (to me) so let&rsquo;s trim the fat, adjust the order and add in some of our own!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+lookup-provider-url-alist</span>
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Doom Emacs issues"</span> <span class="org-string">"https://github.com/hlissner/doom-emacs/issues?q=is%%3Aissue+%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"DuckDuckGo"</span>        +lookup--online-backend-duckduckgo <span class="org-string">"https://duckduckgo.com/?q=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"StackOverflow"</span>     <span class="org-string">"https://stackoverflow.com/search?q=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Github"</span>            <span class="org-string">"https://github.com/search?ref=simplesearch&amp;q=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Youtube"</span>           <span class="org-string">"https://youtube.com/results?aq=f&amp;oq=&amp;search_query=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"MDN"</span>               <span class="org-string">"https://developer.mozilla.org/en-US/search?q=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Arch Wiki"</span>         <span class="org-string">"https://wiki.archlinux.org/index.php?search=%s&amp;title=Special%3ASearch&amp;wprov=acrw1"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"AUR"</span>               <span class="org-string">"https://aur.archlinux.org/packages?O=0&amp;K=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7098217" class="outline-4">
<h4 id="org7098217">Subword-mode</h4>
<div class="outline-text-4" id="text-org7098217">
<p>
Subword mode is a good start because some languages use a lot of CamelCase and
it makes refactoring slightly easier
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">global-subword-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa3857c" class="outline-4">
<h4 id="orgfa3857c">Auto-revert-mode</h4>
<div class="outline-text-4" id="text-orgfa3857c">
<p>
Testing having auto-revert-mode on for text-mode buffers (should just be log
files mostly)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">text-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">auto-revert-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org68ff668" class="outline-4">
<h4 id="org68ff668">Prevent flickering</h4>
<div class="outline-text-4" id="text-org68ff668">
<p>
Noticed some odd flickering here and there, apparently this should resolve it
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">default-frame-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>inhibit-double-buffering . t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org988ab71" class="outline-4">
<h4 id="org988ab71">Clear snippets before loading</h4>
<div class="outline-text-4" id="text-org988ab71">
<p>
Some attempt to make them reproducible.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-babel-pre-tangle-hook</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">file-directory-p</span> <span class="org-string">"snippets"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">async</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">async-start</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">()</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">delete-directory</span> <span class="org-string">"snippets"</span> t <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">not</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">null</span> <span class="org-variable-name">delete-by-moving-to-trash</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>result<span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">print!</span> <span class="org-string">"Delete snippets dir got: "</span> result<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7617433" class="outline-4">
<h4 id="org7617433">Load env after reload</h4>
<div class="outline-text-4" id="text-org7617433">
<p>
Most of the time, reloading breaks. So, let&rsquo;s not break.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-after-reload-hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-load-envvars-file</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"env"</span> <span class="org-variable-name">doom-local-dir</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge62c71e" class="outline-4">
<h4 id="orge62c71e">Reload config without sync</h4>
<div class="outline-text-4" id="text-orge62c71e">
<p>
Seems there&rsquo;s a bug I&rsquo;m too lazy to look into atm on this, so let&rsquo;s just define
another reload command for me to use that doesn&rsquo;t depend on <code>doom sync</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">doom/reload-without-sync</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">mapc</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">require</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-variable-name">doom-incremental-packages</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">doom-context-with</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>reload modules<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-run-hooks</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-before-reload-hook</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-load</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">file-name-concat</span> <span class="org-variable-name">doom-user-dir</span> <span class="org-variable-name">doom-module-init-file</span><span class="org-rainbow-delimiters-depth-4">)</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-demoted-errors</span> <span class="org-string">"PRIVATE CONFIG ERROR: %s"</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">general-auto-unbind-keys</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unwind-protect</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">startup--load-user-init-file</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">general-auto-unbind-keys</span> t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-run-hooks</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-after-reload-hook</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">message</span> <span class="org-string">"Config successfully reloaded!"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-key!</span> <span class="org-variable-name">help-map</span> <span class="org-string">"rc"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom/reload-without-sync</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org97d5569" class="outline-4">
<h4 id="org97d5569">Bury compile buffer</h4>
<div class="outline-text-4" id="text-org97d5569">
<p>
Assuming the buffer finishes successfully, close after 1 second.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">bury-compile-buffer-if-successful</span> <span class="org-rainbow-delimiters-depth-2">(</span>buffer string<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Bury a compilation buffer if succeeded without warnings "</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eq</span> <span class="org-variable-name">major-mode</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">comint-mode</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">string-match</span> <span class="org-string">"finished"</span> string<span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">not</span>
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-current-buffer</span> buffer
                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">search-forward</span> <span class="org-string">"warning"</span> nil t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">run-with-timer</span> <span class="org-highlight-numbers-number">1</span> nil
                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>buf<span class="org-rainbow-delimiters-depth-1">)</span>
                      <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>window <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">get-buffer-window</span> buf<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">window-live-p</span> window<span class="org-rainbow-delimiters-depth-4">)</span>
                                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eq</span> buf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">window-buffer</span> window<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">delete-window</span> window<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                    buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">compilation-finish-functions</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">bury-compile-buffer-if-successful</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f613b1" class="outline-4">
<h4 id="org7f613b1">Evil</h4>
<div class="outline-text-4" id="text-org7f613b1">
</div>
<div id="outline-container-org7be5f3f" class="outline-5">
<h5 id="org7be5f3f">Splits</h5>
<div class="outline-text-5" id="text-org7be5f3f">
<p>
I make a lot of splits, and it finally got annoying having to swap to them all
the time. So, let&rsquo;s change that
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-split-window-below</span> t
      <span class="org-variable-name">evil-vsplit-window-right</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdd4bdf" class="outline-5">
<h5 id="orgbdd4bdf">Fine undo</h5>
<div class="outline-text-5" id="text-orgbdd4bdf">
<p>
I don&rsquo;t need this because I, like all programmers, make 0 mistaeks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-want-fine-undo</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc318442" class="outline-5">
<h5 id="orgc318442">Global substitute</h5>
<div class="outline-text-5" id="text-orgc318442">
<p>
More often than not, I&rsquo;d argue always, I want <code>s/</code> on my ex commands, so let&rsquo;s
sort that out.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-ex-substitute-global</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f292b9" class="outline-5">
<h5 id="org6f292b9">Ignore visual text in the kill ring</h5>
<div class="outline-text-5" id="text-org6f292b9">
<p>
When we overwrite text in visual mode, say <code>vip</code>, don&rsquo;t add to the kill ring.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-kill-on-visual-paste</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4cd1fa0" class="outline-5">
<h5 id="org4cd1fa0">Use emacs binds in insert mode</h5>
<div class="outline-text-5" id="text-org4cd1fa0">
<p>
Some of them are quite useful, and I normally use them in the DE.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">evil-disable-insert-state-bindings</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeef970a" class="outline-4">
<h4 id="orgeef970a">Lispyville</h4>
<div class="outline-text-4" id="text-orgeef970a">
<p>
This structured-editing thing is apparently really neat, so let&rsquo;s see how we go
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> lispy
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> lispyville-key-theme
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>operators normal<span class="org-rainbow-delimiters-depth-4">)</span>
          c-w
          <span class="org-rainbow-delimiters-depth-4">(</span>prettify insert<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>atom-movement normal visual<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>additional-movement normal<span class="org-rainbow-delimiters-depth-4">)</span>
          slurp/barf-lispy
          additional<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d89aa3" class="outline-4">
<h4 id="org3d89aa3">Default scratch mode</h4>
<div class="outline-text-4" id="text-org3d89aa3">
<p>
Make the scratch buffer start in lisp mode
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> doom-scratch-initial-major-mode <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">lisp-interaction-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org32869d9" class="outline-4">
<h4 id="org32869d9">Auth info</h4>
<div class="outline-text-4" id="text-org32869d9">
<p>
Add plaintext authinfo file to the list of sources. I <i>know</i> I should use a GPG
file but I&rsquo;ll get around to it damn it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">auth-sources</span> <span class="org-string">"~/.authinfo"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c2d2cd" class="outline-4">
<h4 id="org4c2d2cd">fetch-auth-source</h4>
<div class="outline-text-4" id="text-org4c2d2cd">
<p>
Useful function to retrieve passwords from auth-sources
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">fetch-auth-source</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> params<span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">auth-source</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>match <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">apply</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">auth-source-search</span> params<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> match
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>secret <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> match <span class="org-builtin">:secret</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">functionp</span> secret<span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> secret<span class="org-rainbow-delimiters-depth-2">)</span>
            secret<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">error</span> <span class="org-string">"Password not found for %S"</span> params<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org60e12cd" class="outline-4">
<h4 id="org60e12cd">Magit</h4>
<div class="outline-text-4" id="text-org60e12cd">
</div>
<div id="outline-container-org072f94f" class="outline-5">
<h5 id="org072f94f">Forge</h5>
<div class="outline-text-5" id="text-org072f94f">
<p>
Allow forge to create repos under my name
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> forge-owned-accounts <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"elken"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org89f29ea" class="outline-4">
<h4 id="org89f29ea">EShell</h4>
<div class="outline-text-4" id="text-org89f29ea">
</div>
<div id="outline-container-org8035934" class="outline-5">
<h5 id="org8035934">Prompt</h5>
<div class="outline-text-5" id="text-org8035934">
<p>
Eshell is a beautiful thing but ootb experience is a tad dated. Custom prompt
based on a combination of the famous p10k and eshell-git-prompt. I only <i>really</i>
need the minimum out of a prompt:
</p>

<ul class="org-ul">
<li><code>cwd</code>; almost impossible to work without knowing the current working directory</li>
<li><code>git</code> info; current branch, dirty/clean status, etc</li>
<li>prompt number: useful for jumping up and down for fast history in a given
session</li>
</ul>

<p>
Can&rsquo;t get enough out of the default powerline theme, and removing a dependancy
we&rsquo;re rolling our own prompt called <code>eshell-p10kline</code>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> eshell-p10k
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/eshell-p10k"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> eshell-p10k
  <span class="org-builtin">:after</span> eshell
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> eshell-prompt-function <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">eshell-p10k-prompt-function</span>
        eshell-prompt-regexp eshell-p10k-prompt-string<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org72cee0f" class="outline-5">
<h5 id="org72cee0f">Settings</h5>
<div class="outline-text-5" id="text-org72cee0f">
<p>
We use eshell in a cross platform world, so we should prefer the lisp version of
things to ensure a more consistent experience.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> eshell-prefer-lisp-functions t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org48d2b32" class="outline-4">
<h4 id="org48d2b32">User setup</h4>
<div class="outline-text-4" id="text-org48d2b32">
<p>
Use my name and emails for things like GPG, snippets, mail, magit, etc. Differs
based on which OS I&rsquo;m on.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">user-full-name</span> <span class="org-string">"Ellis Keny&#337;"</span>
      <span class="org-variable-name">user-mail-address</span> <span class="org-string">"me@elken.dev"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4293a1d" class="outline-4">
<h4 id="org4293a1d">vterm</h4>
<div class="outline-text-4" id="text-org4293a1d">
<p>
Vterm clearly wins the terminal war. Also doesn&rsquo;t need much configuration out of
the box, although the shell integration does. That currently exists in my
<a href="https://github.com/elken/.files">dotfiles</a>
</p>
</div>

<div id="outline-container-orgebb4526" class="outline-5">
<h5 id="orgebb4526">Always compile</h5>
<div class="outline-text-5" id="text-orgebb4526">
<p>
Fixes a weird bug with native-comp, and I don&rsquo;t use guix anymore.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> vterm-always-compile-module t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa55c3b" class="outline-5">
<h5 id="orgfa55c3b">Kill buffer</h5>
<div class="outline-text-5" id="text-orgfa55c3b">
<p>
If the process exits, kill the <code>vterm</code> buffer
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> vterm-kill-buffer-on-exit t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org72f8985" class="outline-5">
<h5 id="org72f8985">Fix <code>c-backspace</code></h5>
<div class="outline-text-5" id="text-org72f8985">
<p>
I&rsquo;ve picked this up in muscle memory now and I&rsquo;m fed up with it not working. Not
anymore!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> vterm
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">define-key</span> vterm-mode-map <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">kbd</span> <span class="org-string">"&lt;C-backspace&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>vterm-send-key <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">kbd</span> <span class="org-string">"C-w"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc61436" class="outline-5">
<h5 id="orgdc61436">Functions</h5>
<div class="outline-text-5" id="text-orgdc61436">
<p>
Useful functions for the shell-side integration provided by vterm.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> vterm
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">alist-get</span> <span class="org-string">"woman"</span> vterm-eval-cmds nil nil <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">equal</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>topic<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">woman</span> topic<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">alist-get</span> <span class="org-string">"magit-status"</span> vterm-eval-cmds nil nil <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">equal</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>path<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">magit-status</span> path<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">alist-get</span> <span class="org-string">"dired"</span> vterm-eval-cmds nil nil <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">equal</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>dir<span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">dired</span> dir<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb29c5b8" class="outline-5">
<h5 id="orgb29c5b8">Multi-vterm</h5>
<div class="outline-text-5" id="text-orgb29c5b8">
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> multi-vterm<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> multi-vterm
  <span class="org-builtin">:after</span> vterm<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4632e98" class="outline-5">
<h5 id="org4632e98">Ensure the shell is ZSH</h5>
<div class="outline-text-5" id="text-org4632e98">
<p>
Noticed a few weird cases where <code>chsh</code> doesn&rsquo;t <i>quite</i> apply, so let&rsquo;s force that to be the case instead.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> vterm-shell <span class="org-string">"/bin/zsh"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf1a59c6" class="outline-3">
<h3 id="orgf1a59c6">Convert a URL to a valid package recipe</h3>
<div class="outline-text-3" id="text-orgf1a59c6">
<p>
Useful when copying links to try new packages. Attempt to create one using
<code>straight-hosts</code>, but fall back if one can&rsquo;t be found.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/url-&gt;package</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string</span> <span class="org-type">&amp;optional</span> arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Interactively select a URL from the kill-ring and create a package! block."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-4">(</span>consult--read-from-kill-ring<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-variable-name">current-prefix-arg</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>str <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">substring-no-properties</span> string<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>str <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">string-replace</span> <span class="org-string">"\""</span> <span class="org-string">""</span> str<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>str <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">string-trim</span> str<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>url <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">url-generic-parse-url</span> str<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>host
              <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">cl-find-if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>cell<span class="org-rainbow-delimiters-depth-4">)</span>
                            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">member</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">url-host</span> url<span class="org-rainbow-delimiters-depth-1">)</span> cell<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                          <span class="org-variable-name">straight-hosts</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">insert</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span>
          <span class="org-string">"(package! "</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">last</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">string-split</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">url-filename</span> url<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-string">"\n:recipe (:host "</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">symbol-name</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">car</span> host<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-string">" :repo \""</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">substring</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">url-filename</span> url<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-string">"\"))"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">insert</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">concat</span>
        <span class="org-string">"(package! "</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">last</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">string-split</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">url-filename</span> url<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-string">"\n:recipe (:host nil :repo \""</span>
          str
          <span class="org-string">"\"))"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">call-interactively</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">indent-region</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</section>

<section id="outline-container-org309c262" class="outline-2">
<h2 id="org309c262">Keybindings</h2>
<div class="outline-text-2" id="text-org309c262">
<p>
It&rsquo;s not a custom config without some fancy keybinds
</p>
</div>

<div id="outline-container-org49f2aa9" class="outline-3">
<h3 id="org49f2aa9">Save</h3>
<div class="outline-text-3" id="text-org49f2aa9">
<p>
Back to a simpler time&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:g</span> <span class="org-string">"C-s"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">save-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dc2507" class="outline-3">
<h3 id="org6dc2507">Search</h3>
<div class="outline-text-3" id="text-org6dc2507">
<p>
<del>Swiper</del> Consult is <i>much</i> better than isearch
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:after</span> evil <span class="org-builtin">:gnvi</span> <span class="org-string">"C-f"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">consult-line</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge08ff30" class="outline-3">
<h3 id="orge08ff30">Dired</h3>
<div class="outline-text-3" id="text-orge08ff30">
<p>
Dired should behave better with evil mappings
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">dired-mode-map</span>
      <span class="org-builtin">:n</span> <span class="org-string">"h"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">dired-up-directory</span>
      <span class="org-builtin">:n</span> <span class="org-string">"l"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">dired-find-alternate-file</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc74b898" class="outline-3">
<h3 id="orgc74b898">Journal</h3>
<div class="outline-text-3" id="text-orgc74b898">
<p>
This is something I&rsquo;m likely to use quite often, especially with an easy
convenience binding
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-journal
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-journal-find-file <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">find-file-other-window</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:leader</span> <span class="org-builtin">:desc</span> <span class="org-string">"Open today's journal"</span> <span class="org-string">"j"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-journal-open-current-journal-file</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</section>

<section id="outline-container-org114c36a" class="outline-2">
<h2 id="org114c36a">Graphical setup</h2>
<div class="outline-text-2" id="text-org114c36a">
</div>
<div id="outline-container-org29bc588" class="outline-3">
<h3 id="org29bc588">Pixel-precision scrolling</h3>
<div class="outline-text-3" id="text-org29bc588">
<p>
Emacs 29 has some new hotness, including a cool new scrolling thing.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">version&lt;</span> <span class="org-string">"29.0.50"</span> <span class="org-variable-name">emacs-version</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>pixel-scroll-precision-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd70d436" class="outline-3">
<h3 id="orgd70d436">which-key</h3>
<div class="outline-text-3" id="text-orgd70d436">
<p>
Remove some of the useless <code>evil-</code> prefixes from which-key commands.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> which-key-allow-multiple-replacements t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> which-key
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pushnew!</span>
   which-key-replacement-alist
   <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">""</span> . <span class="org-string">"\\`+?evil[-:]?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">a-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-4">)</span> . <span class="org-rainbow-delimiters-depth-4">(</span>nil . <span class="org-string">"&#62220; \\1"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\`g s"</span> . <span class="org-string">"\\`evilem--?motion-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-4">)</span> . <span class="org-rainbow-delimiters-depth-4">(</span>nil . <span class="org-string">"&#62220; \\1"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab0df6d" class="outline-3">
<h3 id="orgab0df6d">Marginalia</h3>
<div class="outline-text-3" id="text-orgab0df6d">
<p>
Marginalia is part of the Vertico stack, and is responsible for all the fancy
faces and extra information.
</p>
</div>
<div id="outline-container-org74a970c" class="outline-4">
<h4 id="org74a970c">Files</h4>
<div class="outline-text-4" id="text-org74a970c">
<p>
The doom module out of the box includes a number of customizations, but the
below from Teco gives a much better experience for files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> marginalia
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> marginalia-censor-variables nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice!</span> +marginalia--anotate-local-file-colorful <span class="org-rainbow-delimiters-depth-3">(</span>cand<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Just a more colourful version of `</span><span class="org-doc"><span class="org-constant">marginalia--anotate-local-file</span></span><span class="org-doc">'."</span>
    <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">marginalia--annotate-local-file</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span>attrs <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">file-attributes</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">substitute-in-file-name</span>
                                       <span class="org-rainbow-delimiters-depth-3">(</span>marginalia--full-candidate cand<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">integer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>marginalia--fields
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>marginalia--file-owner attrs<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-builtin">:width</span> <span class="org-highlight-numbers-number">12</span> <span class="org-builtin">:face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">marginalia-file-owner</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>marginalia--file-modes attrs<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>+marginalia-file-size-colorful <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">file-attribute-size</span> attrs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-builtin">:width</span> <span class="org-highlight-numbers-number">7</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>+marginalia--time-colorful <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">file-attribute-modification-time</span> attrs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-builtin">:width</span> <span class="org-highlight-numbers-number">12</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+marginalia--time-colorful</span> <span class="org-rainbow-delimiters-depth-3">(</span>time<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>seconds <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">float-time</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">time-subtract</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">current-time</span><span class="org-rainbow-delimiters-depth-4">)</span> time<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span>color <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doom-blend</span>
                   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">marginalia-date</span> <span class="org-builtin">:foreground</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
                   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">marginalia-documentation</span> <span class="org-builtin">:foreground</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
                   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">/</span> <span class="org-highlight-numbers-number">1.0</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">log</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">+</span> <span class="org-highlight-numbers-number">3</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">/</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">+</span> <span class="org-highlight-numbers-number">1</span> seconds<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">345600.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">1 - log(3 + 1/(days + 1)) % grey
</span>      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> <span class="org-rainbow-delimiters-depth-1">(</span>marginalia--time time<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span> <span class="org-builtin">:foreground</span> color<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+marginalia-file-size-colorful</span> <span class="org-rainbow-delimiters-depth-3">(</span>size<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>size-index <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">/</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">log10</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">+</span> <span class="org-highlight-numbers-number">1</span> size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">7.0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span>color <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">&lt;</span> size-index <span class="org-highlight-numbers-number">10000000</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">10m
</span>                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-blend</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">orange</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">green</span> size-index<span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-blend</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">red</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">orange</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">-</span> size-index <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">file-size-human-readable</span> size<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span> <span class="org-builtin">:foreground</span> color<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5e6c94b" class="outline-3">
<h3 id="org5e6c94b">Info pages</h3>
<div class="outline-text-3" id="text-org5e6c94b">
<p>
Slightly improve the look and feel of Info pages, might actually encourage me to <i>read</i> them.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> info-colors<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> info-colors
  <span class="org-builtin">:after</span> info
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">info-colors-fontify-node</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>Info-selection . info-colors-fontify-node<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge004975" class="outline-3">
<h3 id="orge004975">Dashboard</h3>
<div class="outline-text-3" id="text-orge004975">
<p>
Inhibit the menu to improve things slightly
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+doom-dashboard-functions</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-dashboard-widget-shortmenu</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+doom-dashboard-functions</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-dashboard-widget-footer</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dc7c67" class="outline-3">
<h3 id="org6dc7c67">Modeline</h3>
<div class="outline-text-3" id="text-org6dc7c67">
<p>
Default modeline is a tad cluttered, and because I don&rsquo;t use exwm anymore the
modeline from that module isn&rsquo;t in use. So, it&rsquo;s duplicated here and tweaked.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> doom-modeline
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">all-the-icons-scale-factor</span> <span class="org-highlight-numbers-number">1.1</span>
        auto-revert-check-vc-info t
        doom-modeline-major-mode-icon <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">display-graphic-p</span><span class="org-rainbow-delimiters-depth-3">)</span>
        doom-modeline-major-mode-color-icon <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">display-graphic-p</span><span class="org-rainbow-delimiters-depth-3">)</span>
        doom-modeline-buffer-file-name-style <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">relative-to-project</span>
        doom-modeline-github t
        doom-modeline-github-interval <span class="org-highlight-numbers-number">60</span>
        doom-modeline-vcs-max-length <span class="org-highlight-numbers-number">60</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-modeline-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">size-indication-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-modeline-def-modeline <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">main</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>bar modals workspace-name window-number persp-name buffer-position selection-info buffer-info matches remote-host debug vcs matches<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>github mu4e grip gnus checker misc-info repl lsp <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga41138b" class="outline-3">
<h3 id="orga41138b">Fonts</h3>
<div class="outline-text-3" id="text-orga41138b">
</div>
<div id="outline-container-org436e437" class="outline-4">
<h4 id="org436e437">Defaults</h4>
<div class="outline-text-4" id="text-org436e437">
<p>
Configure the fonts across all used platforms (slightly different names).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span>  <span class="org-variable-name">doom-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Iosevka Nerd Font"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">16</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-variable-name">doom-variable-pitch-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Montserrat"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">16</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-variable-name">doom-unicode-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">font-spec</span> <span class="org-builtin">:family</span> <span class="org-string">"Iosevka Nerd Font"</span> <span class="org-builtin">:size</span> <span class="org-highlight-numbers-number">16</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b1aa2b" class="outline-4">
<h4 id="org7b1aa2b">Ligatures</h4>
<div class="outline-text-4" id="text-org7b1aa2b">
<p>
Ligatures are a mess in programming languages, however they make org documents
quite nice so let&rsquo;s just use them here until a good fix is found.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-hook!</span> org-mode
  <span class="org-variable-name">prettify-symbols-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+end_quote"</span> . <span class="org-string">"&#8221;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+END_QUOTE"</span> . <span class="org-string">"&#8221;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+begin_quote"</span> . <span class="org-string">"&#8220;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+BEGIN_QUOTE"</span> . <span class="org-string">"&#8220;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+end_src"</span> . <span class="org-string">"&#171;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+END_SRC"</span> . <span class="org-string">"&#171;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+begin_src"</span> . <span class="org-string">"&#187;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+BEGIN_SRC"</span> . <span class="org-string">"&#187;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+name:"</span> . <span class="org-string">"&#187;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#+NAME:"</span> . <span class="org-string">"&#187;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6662a31" class="outline-3">
<h3 id="org6662a31">Theme</h3>
<div class="outline-text-3" id="text-org6662a31">
<p>
Load my current flavour-of-the-month colour scheme.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doom-theme</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-nord</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Along with a few face overrides (thought about merging upstream but it would
have sparked a discussion, maybe later)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">custom-theme-set-faces!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-nord</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:constructor <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:number <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:attribute <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:variable <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">base7</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:variable.builtin <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">base7</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:constant.builtin <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:constant <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">teal</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:function.macro <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">teal</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:label <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:operator <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:variable.parameter <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dark-blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:punctuation.delimiter <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cyan</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:punctuation.bracket <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cyan</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:punctuation.special <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cyan</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:type <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:type.builtin <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:tag <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">base7</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:string <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">green</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:comment <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">base6</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:function <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cyan</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:method <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">teal</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:function.builtin <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cyan</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:property <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dark-blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>tree-sitter-hl-face:keyword <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>corfu-default <span class="org-builtin">:font</span> <span class="org-string">"Iosevka Nerd Font Mono"</span> <span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bg-alt</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fg</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-title-0-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.2</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-title-1-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-title-2-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">violet</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.05</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-title-3-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-lighten</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">blue</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">0.25</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.0</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-title-4-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doom-lighten</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">doom-color</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">magenta</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">0.25</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-verbatim-face <span class="org-builtin">:background</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-list-face <span class="org-builtin">:background</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>adoc-internal-reference-face <span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span> <span class="org-builtin">:foreground</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89a5503" class="outline-3">
<h3 id="org89a5503">Banner</h3>
<div class="outline-text-3" id="text-org89a5503">
<p>
Change the default banner (need to add the ASCII banner at some point)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+doom-dashboard-banner-file</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"images/banner.png"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d2626c" class="outline-3">
<h3 id="org4d2626c">Line Numbers</h3>
<div class="outline-text-3" id="text-org4d2626c">
<p>
Set the default line number format to be relative and disable line numbers for
specific modes
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">display-line-numbers-type</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">relative</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>mode <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-mode-hook</span>
                term-mode-hook
                <span class="org-variable-name">shell-mode-hook</span>
                eshell-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-hook</span> mode <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">display-line-numbers-mode</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7d8af36" class="outline-3">
<h3 id="org7d8af36">GUI/Frame</h3>
<div class="outline-text-3" id="text-org7d8af36">
<p>
Maximise emacs on startup when not running under awesome
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string=</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">shell-command-to-string</span> <span class="org-string">"pgrep awesome"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">default-frame-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>fullscreen . maximized<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Add some transparency when running under awesome
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string=</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">shell-command-to-string</span> <span class="org-string">"pgrep awesome"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-frame-parameter</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">selected-frame</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">alpha-background</span> <span class="org-highlight-numbers-number">90</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">default-frame-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>alpha-background . <span class="org-highlight-numbers-number">90</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</section>

<section id="outline-container-orgedea42d" class="outline-2">
<h2 id="orgedea42d">Org Mode</h2>
<div class="outline-text-2" id="text-orgedea42d">
</div>
<div id="outline-container-orgb49e3f7" class="outline-3">
<h3 id="orgb49e3f7">fill-column</h3>
<div class="outline-text-3" id="text-orgb49e3f7">
<p>
Keep the content centered on the page when writing org documents
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> visual-fill-column<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> visual-fill-column
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">visual-fill-column-width</span> <span class="org-highlight-numbers-number">300</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">visual-fill-column-center-text</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-mode</span> . <span class="org-variable-name">visual-fill-column-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org546eb5e" class="outline-3">
<h3 id="org546eb5e">Hook setup</h3>
<div class="outline-text-3" id="text-org546eb5e">
<p>
<code>org-mode</code> is a wonderful thing, and far too complex to bury in another section.
The more I use it, the more I will add to this area but for now it&rsquo;s mostly used
for documentation and organisation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/org-setup-hook</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Modes to enable on org-mode start"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">org-indent-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">visual-line-mode</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">+org-pretty-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">elken/org-font-setup</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> org-mode <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">elken/org-setup-hook</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc78a29f" class="outline-3">
<h3 id="orgc78a29f">org-directory</h3>
<div class="outline-text-3" id="text-orgc78a29f">
<p>
Let&rsquo;s set a sane default directory based on where I am
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-directory</span> <span class="org-string">"~/Nextcloud/org"</span>
      <span class="org-variable-name">org-agenda-files</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"~/Nextcloud/org/Home.org"</span> <span class="org-string">"~/Nextcloud/org/Work.org"</span> <span class="org-string">"~/Nextcloud/org/Notes.org"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd43e914" class="outline-3">
<h3 id="orgd43e914">Font setup</h3>
<div class="outline-text-3" id="text-orgd43e914">
<p>
Font setup to prettify the fonts. Uses Montserrat in most places except where
it makes sense to use the defined fixed width font.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/org-font-setup</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set faces for heading levels
</span>  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>face <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>org-level-1 . <span class="org-highlight-numbers-number">1.2</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-2 . <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-3 . <span class="org-highlight-numbers-number">1.05</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-4 . <span class="org-highlight-numbers-number">1.0</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-5 . <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-6 . <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-7 . <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-level-8 . <span class="org-highlight-numbers-number">1.1</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">car</span> face<span class="org-rainbow-delimiters-depth-4">)</span> nil <span class="org-builtin">:font</span> <span class="org-string">"Montserrat"</span> <span class="org-builtin">:weight</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">regular</span> <span class="org-builtin">:height</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> face<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:slant</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">unspecified</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure that anything that should be fixed-pitch in Org files appears that way
</span>  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-tag</span> nil <span class="org-builtin">:foreground</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>shadow fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:weight</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bold</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-block</span> nil <span class="org-builtin">:foreground</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fixed-pitch</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-code</span> nil   <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>shadow fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-table</span> nil   <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>shadow fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-verbatim</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>shadow fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-special-keyword</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">font-lock-comment-face</span> fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-meta-line</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">font-lock-comment-face</span> fixed-pitch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">set-face-attribute</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-checkbox</span> nil <span class="org-builtin">:inherit</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">fixed-pitch</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9275f5a" class="outline-3">
<h3 id="org9275f5a">Properties</h3>
<div class="outline-text-3" id="text-org9275f5a">
</div>
<div id="outline-container-org071cd97" class="outline-4">
<h4 id="org071cd97">Allow property inheritance</h4>
<div class="outline-text-4" id="text-org071cd97">
<p>
This may be the solution to <i>so</i> many weird issues with src blocks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-use-property-inheritance</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga808831" class="outline-3">
<h3 id="orga808831">Characters</h3>
<div class="outline-text-3" id="text-orga808831">
<p>
Tried out org-modern recently, it is <i>very</i> nice but also detracts away from some
of the org markup and makes editing it too hard, so back to <code>(:lang org +pretty)</code>
we go.
</p>
</div>

<div id="outline-container-org4be7530" class="outline-4">
<h4 id="org4be7530">Headline bullets</h4>
<div class="outline-text-4" id="text-org4be7530">
<p>
I don&rsquo;t feel the need for fancy characters to discern depth, I found this on
someone else&rsquo;s config and I actually quite like the minimal look.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-superstar-headline-bullets-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"&#8250; "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org34fc480" class="outline-4">
<h4 id="org34fc480">Item bullets</h4>
<div class="outline-text-4" id="text-org34fc480">
<p>
Barely any adjustment here, just make them look a <i>bit</i> nicer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-superstar-item-bullet-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>?* . ?&#8902;<span class="org-rainbow-delimiters-depth-3">)</span>
                                        <span class="org-rainbow-delimiters-depth-3">(</span>?+ . ?&#8227;<span class="org-rainbow-delimiters-depth-3">)</span>
                                        <span class="org-rainbow-delimiters-depth-3">(</span>?- . ?&#8226;<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cea920" class="outline-4">
<h4 id="org1cea920">Dropdown icon</h4>
<div class="outline-text-4" id="text-org1cea920">
<p>
When a drawer is collapsed, show a nice dropdown arrow.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-ellipsis</span> <span class="org-string">" &#9662;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org93dea12" class="outline-3">
<h3 id="org93dea12">Keywords</h3>
<div class="outline-text-3" id="text-org93dea12">
<p>
Default keywords are <i>far</i> too minimal. This will need further tweaking as I start
using org mode for organisation more.
</p>

<p>
Some tasks we want to file an action for, eg <code>DONE</code>, <code>KILL</code> and <code>WAIT</code> occur and we want to list a reason why. <code>org-todo-keywords</code> handles this natively by simply adding <code>@/!</code> after the shortcut key.
</p>

<p>
The below is courtesy of <a href="https://git.sr.ht/~gagbo/doom-config/tree/eb615417ca0cc01df89bc9a9aea06e5c99f97540/item/config-org.el#L57-62">gagbo</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-todo-keywords</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>sequence <span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string">(t)"</span> <span class="org-string">"INPROG(i)"</span> <span class="org-string">"PROJ(p)"</span> <span class="org-string">"STORY(s)"</span> <span class="org-string">"WAIT(w@/!)"</span> <span class="org-string">"|"</span> <span class="org-string">"DONE(d@/!)"</span> <span class="org-string">"KILL(k@/!)"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>sequence <span class="org-string">"[ ](T)"</span> <span class="org-string">"[-](S)"</span> <span class="org-string">"[?](W)"</span> <span class="org-string">"|"</span> <span class="org-string">"[X](D)"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">The triggers break down to the following rules:
</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to =KILLED= adds a =killed= tag
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to =WAIT= adds a =waiting= tag
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to a done state removes =WAIT= and =HOLD= tags
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to =</span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment">= removes all tags
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to =NEXT= removes all tags
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">- Moving a task to =DONE= removes all tags
</span>        <span class="org-variable-name">org-todo-state-tags-triggers</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"KILL"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"killed"</span> . t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"HOLD"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hold"</span> . t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"WAIT"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"waiting"</span> . t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>done <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"waiting"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hold"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"waiting"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cancelled"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hold"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"NEXT"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"waiting"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cancelled"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hold"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"DONE"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"waiting"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cancelled"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hold"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">This settings allows to fixup the state of a todo item without
</span>        <span class="org-comment-delimiter">;; </span><span class="org-comment">triggering notes or log.
</span>        <span class="org-variable-name">org-treat-S-cursor-todo-selection-as-state-change</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1469dd4" class="outline-3">
<h3 id="org1469dd4">Agenda/Log</h3>
<div class="outline-text-3" id="text-org1469dd4">
</div>
<div id="outline-container-org7a028a3" class="outline-4">
<h4 id="org7a028a3">Show <code>DONE</code> tasks in agenda</h4>
<div class="outline-text-4" id="text-org7a028a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-agenda-start-with-log-mode</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9d60f7" class="outline-4">
<h4 id="orgf9d60f7">Timestamp done items</h4>
<div class="outline-text-4" id="text-orgf9d60f7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-log-done</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">time</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5057f2e" class="outline-4">
<h4 id="org5057f2e">Log items in the drawer</h4>
<div class="outline-text-4" id="text-org5057f2e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-log-into-drawer</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd336180" class="outline-3">
<h3 id="orgd336180">Cycle</h3>
<div class="outline-text-3" id="text-orgd336180">
<p>
Cycle by default (no idea why this isn&rsquo;t default)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-cycle-emulate-tab</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge73720c" class="outline-3">
<h3 id="orge73720c">Folding</h3>
<div class="outline-text-3" id="text-orge73720c">
<p>
Default folding is very noisy, I <i>rarely</i> need to see everything expanded
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-startup-folded</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">content</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org912c6fe" class="outline-3">
<h3 id="org912c6fe">Org-appear</h3>
<div class="outline-text-3" id="text-org912c6fe">
<p>
Defines a minor mode to allow special forms such as <i>italics</i>, <b>bold</b>, <span class="underline">underline</span> and
<code>literal</code> to be editable when the cursor is over them, otherwise display the
proper value.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> org-appear
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"awth13/org-appear"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-appear
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-mode</span> . <span class="org-variable-name">org-appear-mode</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-appear-autoemphasis</span> t
        <span class="org-variable-name">org-appear-autolinks</span> t
        <span class="org-variable-name">org-appear-autosubmarkers</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org79a3cc3" class="outline-3">
<h3 id="org79a3cc3">Mixed pitch</h3>
<div class="outline-text-3" id="text-org79a3cc3">
<p>
Enable <code>mixed-pitch-mode</code> to enable the more readable fonts where it makes sense.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> mixed-pitch<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> +zen-mixed-pitch-modes <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>org-mode LaTeX-mode markdown-mode gfm-mode Info-mode rst-mode adoc-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>hook +zen-mixed-pitch-modes<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-hook</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">symbol-name</span> hook<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"-hook"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">mixed-pitch-mode</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a80801" class="outline-3">
<h3 id="org4a80801">Archive/Cleanup</h3>
<div class="outline-text-3" id="text-org4a80801">
<p>
Adjust the format of archived org files (so they don&rsquo;t show up in orgzly)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-archive-location</span> <span class="org-string">"archive/Archive_%s::"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-org6ca9ca6" class="outline-4">
<h4 id="org6ca9ca6">Archive <code>DONE</code> tasks</h4>
<div class="outline-text-4" id="text-org6ca9ca6">
<p>
Enables archiving of tasks. Replaces the in-built version which only works for single tasks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/org-archive-done-tasks</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Attempt to archive all done tasks in file"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-map-entries</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-archive-subtree</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-map-continue-from</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:begin</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-element-at-point</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"/DONE"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">file</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span> <span class="org-builtin">:desc</span> <span class="org-string">"Archive tasks marked DONE"</span> <span class="org-string">"C-c DEL a"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">elken/org-archive-done-tasks</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6c2ae9" class="outline-4">
<h4 id="orgf6c2ae9">Remove <code>KILL</code> tasks</h4>
<div class="outline-text-4" id="text-orgf6c2ae9">
<p>
Enables removal of killed tasks. I&rsquo;m not <i>yet</i> interested in tracking this long-term.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/org-remove-kill-tasks</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-map-entries</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-cut-subtree</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">pop</span> <span class="org-variable-name">kill-ring</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-map-continue-from</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-element-property</span> <span class="org-builtin">:begin</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-element-at-point</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"/KILL"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">file</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-variable-name">org-mode-map</span> <span class="org-builtin">:desc</span> <span class="org-string">"Remove tasks marked as KILL"</span> <span class="org-string">"C-c DEL k"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">elken/org-remove-kill-tasks</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3b88146" class="outline-3">
<h3 id="org3b88146">Show images</h3>
<div class="outline-text-3" id="text-org3b88146">
<p>
Show images inline by default
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-startup-with-inline-images</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
But also, adjust them to an appropriate size. This should be adjusted to handle better resolutions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-image-actual-width</span> <span class="org-highlight-numbers-number">600</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd855004" class="outline-3">
<h3 id="orgd855004">Autoexecute tangled shell files</h3>
<div class="outline-text-3" id="text-orgd855004">
<p>
Make tangled shell files executable (I trust myself, ish&#x2026;)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/make-tangled-shell-executable</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Ensure that tangled shell files are executable"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">set-file-modes</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">buffer-file-name</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">#o755</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-babel-post-tangle-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">elken/make-tangled-shell-executable</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e93b1e" class="outline-3">
<h3 id="org3e93b1e">Variable setup</h3>
<div class="outline-text-3" id="text-org3e93b1e">
<p>
Useful settings and functions for maintaining modified dates in org files
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">enable-dir-local-variables</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/find-time-property</span> <span class="org-rainbow-delimiters-depth-2">(</span>property<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find the PROPETY in the current buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>first-heading
           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> <span class="org-variable-name">org-outline-regexp-bol</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">re-search-forward</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">format</span> <span class="org-string">"^#\\+%s:"</span> property<span class="org-rainbow-delimiters-depth-2">)</span> nil t<span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/has-time-property-p</span> <span class="org-rainbow-delimiters-depth-2">(</span>property<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Gets the position of PROPETY if it exists, nil if not and empty string if it's undefined."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>pos <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">elken/find-time-property</span> property<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> pos<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">looking-at-p</span> <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">forward-char</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-at-timestamp-p</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">lax</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          pos
        <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">elken/set-time-property</span> <span class="org-rainbow-delimiters-depth-2">(</span>property <span class="org-type">&amp;optional</span> pos<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Set the PROPERTY in the current buffer.
Can pass the position as POS if already computed."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>pos <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> pos <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">elken/find-time-property</span> property<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> pos<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">looking-at-p</span> <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">forward-char</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">delete-region</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">line-end-position</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>now <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format-time-string</span> <span class="org-string">"&lt;%Y-%m-%d %H:%M&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> now<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">before-save-hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">derived-mode-p</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mode</span><span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">elken/set-time-property</span> <span class="org-string">"LAST_MODIFIED"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">elken/set-time-property</span> <span class="org-string">"DATE_UPDATED"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf398fb7" class="outline-3">
<h3 id="orgf398fb7">Better snippets</h3>
<div class="outline-text-3" id="text-orgf398fb7">
<p>
Programmers are, by design, lazy
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-tempo
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-structure-template-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sh"</span> . <span class="org-string">"src shell"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-structure-template-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"els"</span> . <span class="org-string">"src elisp"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-structure-template-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"el"</span> . <span class="org-string">"src emacs-lisp"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc29b15" class="outline-3">
<h3 id="orgcc29b15">Roam</h3>
<div class="outline-text-3" id="text-orgcc29b15">
<p>
Let&rsquo;s jump on the bandwagon and start taking useful notes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-roam-directory</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"roam"</span> <span class="org-variable-name">org-directory</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-org1f7e56c" class="outline-4">
<h4 id="org1f7e56c">Templates</h4>
<div class="outline-text-4" id="text-org1f7e56c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-roam
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-roam-capture-templates</span>
        <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"d"</span> <span class="org-string">"default"</span> plain
           <span class="org-rainbow-delimiters-depth-1">(</span>file ,<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"templates/roam-default.org"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-builtin">:if-new</span> <span class="org-rainbow-delimiters-depth-1">(</span>file+head <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-builtin">:unnarrowed</span> t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org09a3c80" class="outline-3">
<h3 id="org09a3c80">Capture</h3>
<div class="outline-text-3" id="text-org09a3c80">
<p>
It&rsquo;s about time I start using <code>org-capture</code>, but because I&rsquo;m a developer I&rsquo;m inhernetly lazy so time to steal from other people.
</p>

<p>
Useful wrapper package for creating more declarative templates
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> doct<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> doct
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">doct</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-org92f1a2f" class="outline-4">
<h4 id="org92f1a2f">Prettify</h4>
<div class="outline-text-4" id="text-org92f1a2f">
<p>
Improve the look of the capture dialog (idea borrowed from <a href="https://github.com/tecosaur">tecosaur</a>)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-capture-select-template-prettier</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> keys<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Select a capture template, in a prettier way than default
Lisp programs can force the template by setting KEYS to a string."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">org-capture-templates</span>
         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-contextualize-keys</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-capture-upgrade-templates</span> <span class="org-variable-name">org-capture-templates</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-variable-name">org-capture-templates-contexts</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t"</span> <span class="org-string">"Task"</span> entry <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">""</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?\n  %u\n  %a"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> keys
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> keys <span class="org-variable-name">org-capture-templates</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">error</span> <span class="org-string">"No capture template referred to by \"%s\" keys"</span> keys<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-mks</span> <span class="org-variable-name">org-capture-templates</span>
               <span class="org-string">"Select a capture template\n&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;"</span>
               <span class="org-string">"Template key: "</span>
               <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"q"</span> ,<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">all-the-icons-octicon</span> <span class="org-string">"stop"</span> <span class="org-builtin">:face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">all-the-icons-red</span> <span class="org-builtin">:v-adjust</span> <span class="org-highlight-numbers-number">0.01</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"\tAbort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-capture-select-template</span> <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-capture-select-template-prettier</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-mks-pretty</span> <span class="org-rainbow-delimiters-depth-2">(</span>table title <span class="org-type">&amp;optional</span> prompt specials<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Select a member of an alist with multiple keys. Prettified.

TABLE is the alist which should contain entries where the car is a string.
There should be two types of entries.

1. prefix descriptions like (\"a\" \"Description\")
   This indicates that `</span><span class="org-doc"><span class="org-constant">a</span></span><span class="org-doc">' is a prefix key for multi-letter selection, and
   that there are entries following with keys like \"ab\", \"ax\"&#8230;

2. Select-able members must have more than two elements, with the first
   being the string of keys that lead to selecting it, and the second a
   short description string of the item.

The command will then make a temporary buffer listing all entries
that can be selected with a single key, and all the single key
prefixes.  When you press the key for a single-letter entry, it is selected.
When you press a prefix key, the commands (and maybe further prefixes)
under this key will be shown and offered for selection.

TITLE will be placed over the selection in the temporary buffer,
PROMPT will be used when prompting for a key.  SPECIALS is an
alist with (\"key\" \"description\") entries.  When one of these
is selected, only the bare key is returned."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-window-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">inhibit-quit</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-switch-to-buffer-other-window</span> <span class="org-string">"*Org Select*"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-rainbow-delimiters-depth-1">(</span>prompt <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> prompt <span class="org-string">"Select: "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
          <span class="org-variable-name">case-fold-search</span>
          current<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unwind-protect</span>
          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">catch</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span>
            <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> t
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">evil-normal-state-cursor</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">list</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">erase-buffer</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">insert</span> title <span class="org-string">"\n\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>des-keys nil<span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>allowed-keys <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\C-g"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>tab-alternatives <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\s"</span> <span class="org-string">"\t"</span> <span class="org-string">"\r"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">cursor-type</span> nil<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Populate allowed keys and descriptions keys
</span>                <span class="org-comment-delimiter">;; </span><span class="org-comment">available with CURRENT selector.
</span>                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>re <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"\\`%s</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\'"</span>
                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> current <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">regexp-quote</span> current<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span>prefix <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> current <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> current <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>entry table<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">pcase</span> entry
                      <span class="org-comment-delimiter">;; </span><span class="org-comment">Description.
</span>                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> key <span class="org-rainbow-delimiters-depth-2">(</span>pred <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string-match</span> re<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ,desc<span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>k <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">match-string</span> <span class="org-highlight-numbers-number">1</span> key<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">push</span> k des-keys<span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-comment-delimiter">;; </span><span class="org-comment">Keys ending in tab, space or RET are equivalent.
</span>                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">member</span> k tab-alternatives<span class="org-rainbow-delimiters-depth-2">)</span>
                             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> <span class="org-string">"\t"</span> allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span>
                           <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> k allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> prefix <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> k <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bold</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> <span class="org-string">"&#8250;"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"  "</span> desc <span class="org-string">"&#8230;"</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-comment-delimiter">;; </span><span class="org-comment">Usable entry.
</span>                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> key <span class="org-rainbow-delimiters-depth-2">(</span>pred <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">string-match</span> re<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ,desc . ,_<span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>k <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">match-string</span> <span class="org-highlight-numbers-number">1</span> key<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> prefix <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">font-lock-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">propertize</span> k <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">bold</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"   "</span> desc <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">push</span> k allowed-keys<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span>_ nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Insert special entries, if any.
</span>                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> specials
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">insert</span> <span class="org-string">"&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">pcase-dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span>,key ,description<span class="org-rainbow-delimiters-depth-3">)</span> specials<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">insert</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"%s   %s\n"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">propertize</span> key <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">face</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-1">(</span>bold all-the-icons-red<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> description<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> key allowed-keys<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">Display UI and let user select an entry or
</span>                <span class="org-comment-delimiter">;; </span><span class="org-comment">a sub-level prefix.
</span>                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">pos-visible-in-window-p</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-fit-window-to-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pressed <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org--mks-read-key</span> allowed-keys prompt nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> current <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> current pressed<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">equal</span> pressed <span class="org-string">"\C-g"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">user-error</span> <span class="org-string">"Abort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">equal</span> pressed <span class="org-string">"ESC"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">user-error</span> <span class="org-string">"Abort"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection is a prefix: open a new menu.
</span>                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">member</span> pressed des-keys<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection matches an association: return it.
</span>                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>entry <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">assoc</span> current table<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> entry <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">throw</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span> entry<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-comment-delimiter">;; </span><span class="org-comment">Selection matches a special entry: return the
</span>                   <span class="org-comment-delimiter">;; </span><span class="org-comment">selection prefix.
</span>                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> current specials<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">throw</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">exit</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   <span class="org-rainbow-delimiters-depth-2">(</span>t <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">error</span> <span class="org-string">"No entry available"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> buffer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">kill-buffer</span> buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">advice-add</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">org-mks</span> <span class="org-builtin">:override</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-mks-pretty</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
The <a href="file:///github/home/.config/emacs/bin/org-capture">doom org-capture bin</a> is rather nice, but I&rsquo;d be nicer with a smaller frame, and
no modeline.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">alist-get</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">height</span> <span class="org-variable-name">+org-capture-frame-parameters</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">15</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(alist-get 'name +org-capture-frame-parameters) "&#10070; Capture") ;; ATM hardcoded in other places, so changing breaks stuff
</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> +org-capture-fn
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">set-window-parameter</span> nil <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">mode-line-format</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">none</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-capture</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Sprinkle in some <code>doct</code> utility functions
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+doct-icon-declaration-to-icon</span> <span class="org-rainbow-delimiters-depth-2">(</span>declaration<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Convert :icon declaration to icon"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">pop</span> declaration<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">set</span>  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"all-the-icons-"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:set</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>face <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">intern</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">concat</span> <span class="org-string">"all-the-icons-"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:color</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>v-adjust <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> declaration <span class="org-builtin">:v-adjust</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">0.01</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">apply</span> set <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span>,name <span class="org-builtin">:face</span> ,face <span class="org-builtin">:v-adjust</span> ,v-adjust<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+doct-iconify-capture-templates</span> <span class="org-rainbow-delimiters-depth-2">(</span>groups<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Add declaration's :icon to each template group in GROUPS."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>templates <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">doct-flatten-lists-in</span> groups<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doct-templates</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>template<span class="org-rainbow-delimiters-depth-2">)</span>
                                   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>props <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nthcdr</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">=</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">length</span> template<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">2</span> <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-2">)</span> template<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                               <span class="org-rainbow-delimiters-depth-4">(</span>spec <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> props <span class="org-builtin">:doct</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:icon</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setf</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> template<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">+doct-icon-declaration-to-icon</span> spec<span class="org-rainbow-delimiters-depth-1">)</span>
                                                                    <span class="org-string">"\t"</span>
                                                                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nth</span> <span class="org-highlight-numbers-number">1</span> template<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                   template<span class="org-rainbow-delimiters-depth-1">)</span>
                                 templates<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">doct-after-conversion-functions</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>+doct-iconify-capture-templates<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga34004e" class="outline-4">
<h4 id="orga34004e">Templates</h4>
<div class="outline-text-4" id="text-orga34004e">
<p>
And we can now add some templates! This isn&rsquo;t even remotely set in stone, I wouldn&rsquo;t even describe them as set in <i>jelly</i> really.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> org-capture
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+org-capture/replace-brackets</span> <span class="org-rainbow-delimiters-depth-3">(</span>link<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">mapconcat</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>c<span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">key-description</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">vector</span> c<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"["</span> <span class="org-string">"("</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"]"</span> <span class="org-string">")"</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-rainbow-delimiters-depth-2">(</span>_ <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">key-description</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">vector</span> c<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     link<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-capture-templates</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">doct</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Home"</span> <span class="org-builtin">:keys</span> <span class="org-string">"h"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"home"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"cyan"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">"Home.org"</span>
                 <span class="org-builtin">:prepend</span> t
                 <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?"</span>
                            <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Work"</span> <span class="org-builtin">:keys</span> <span class="org-string">"w"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"business"</span> <span class="org-builtin">:set</span> <span class="org-string">"material"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">"Work.org"</span>
                 <span class="org-builtin">:prepend</span> t
                 <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?"</span>
                            <span class="org-string">"SCHEDULED: %^{Schedule:}t"</span>
                            <span class="org-string">"DEADLINE: %^{Deadline:}t"</span>
                            <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Note"</span> <span class="org-builtin">:keys</span> <span class="org-string">"n"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"sticky-note"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">"Notes.org"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* %?"</span>
                            <span class="org-string">"%i %a"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Journal"</span> <span class="org-builtin">:keys</span> <span class="org-string">"j"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"calendar"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"pink"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:type</span> plain
                 <span class="org-builtin">:function</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">org-journal-new-entry</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eq</span> org-journal-file-type <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">daily</span><span class="org-rainbow-delimiters-depth-4">)</span>
                               <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-narrow-to-subtree</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-max</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:template</span> <span class="org-string">"** %(format-time-string org-journal-time-format)%^{Title}\n%i%?"</span>
                 <span class="org-builtin">:jump-to-captured</span> t
                 <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Protocol"</span> <span class="org-builtin">:keys</span> <span class="org-string">"P"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"link"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"blue"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">"Notes.org"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %^{Title}"</span>
                            <span class="org-string">"Source: %u"</span>
                            <span class="org-string">"#+BEGIN_QUOTE"</span>
                            <span class="org-string">"%i"</span>
                            <span class="org-string">"#+END_QUOTE"</span>
                            <span class="org-string">"%?"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Protocol link"</span> <span class="org-builtin">:keys</span> <span class="org-string">"L"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"link"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"blue"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">"Notes.org"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* </span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> %?"</span>
                            <span class="org-string">"[[%:link][%:description]]"</span>
                            <span class="org-string">"Captured on: %U"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Project"</span> <span class="org-builtin">:keys</span> <span class="org-string">"p"</span>
                 <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"repo"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"silver"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:prepend</span> t
                 <span class="org-builtin">:type</span> entry
                 <span class="org-builtin">:headline</span> <span class="org-string">"Inbox"</span>
                 <span class="org-builtin">:template</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"* %{keyword} %?"</span>
                            <span class="org-string">"%i"</span>
                            <span class="org-string">"%a"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:file</span> <span class="org-string">""</span>
                 <span class="org-builtin">:custom</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:keyword</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-builtin">:children</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Task"</span> <span class="org-builtin">:keys</span> <span class="org-string">"t"</span>
                             <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"checklist"</span> <span class="org-builtin">:set</span> <span class="org-string">"octicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"green"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                             <span class="org-builtin">:keyword</span> <span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string">"</span>
                             <span class="org-builtin">:file</span> +org-capture-project-todo-file<span class="org-rainbow-delimiters-depth-3">)</span>
                            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Note"</span> <span class="org-builtin">:keys</span> <span class="org-string">"n"</span>
                             <span class="org-builtin">:icon</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"sticky-note"</span> <span class="org-builtin">:set</span> <span class="org-string">"faicon"</span> <span class="org-builtin">:color</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                             <span class="org-builtin">:keyword</span> <span class="org-string">"%U"</span>
                             <span class="org-builtin">:file</span> +org-capture-project-notes-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4f90531" class="outline-3">
<h3 id="org4f90531">Export</h3>
<div class="outline-text-3" id="text-org4f90531">
</div>
<div id="outline-container-org8340433" class="outline-4">
<h4 id="org8340433">LaTeX</h4>
<div class="outline-text-4" id="text-org8340433">
<p>
A necessary evil. I hate it, it hates me, but it makes my PDF documents look nice.
</p>
</div>

<div id="outline-container-org2c1af04" class="outline-5">
<h5 id="org2c1af04">Preambles</h5>
<div class="outline-text-5" id="text-org2c1af04">
<p>
Various preamble setups to improve the overall look of several items
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-caption-preamble</span> <span class="org-string">"
\\usepackage{subcaption}
\\usepackage[hypcap=true]{caption}
\\setkomafont{caption}{\\sffamily\\small}
\\setkomafont{captionlabel}{\\upshape\\bfseries}
\\captionsetup{justification=raggedright,singlelinecheck=true}
\\usepackage{capt-of} % required by Org
"</span>
  <span class="org-doc">"Preamble that improves captions."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-checkbox-preamble</span> <span class="org-string">"
\\newcommand{\\checkboxUnchecked}{$\\square$}
\\newcommand{\\checkboxTransitive}{\\rlap{\\raisebox{-0.1ex}{\\hspace{0.35ex}\\Large\\textbf -}}$\\square$}
\\newcommand{\\checkboxChecked}{\\rlap{\\raisebox{0.2ex}{\\hspace{0.35ex}\\scriptsize \\ding{52}}}$\\square$}
"</span>
  <span class="org-doc">"Preamble that improves checkboxes."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-box-preamble</span> <span class="org-string">"
% args = #1 Name, #2 Colour, #3 Ding, #4 Label
\\newcommand{\\defsimplebox}[4]{%
  \\definecolor{#1}{HTML}{#2}
  \\newenvironment{#1}[1][]
  {%
    \\par\\vspace{-0.7\\baselineskip}%
    \\textcolor{#1}{#3} \\textcolor{#1}{\\textbf{\\def\\temp{##1}\\ifx\\temp\\empty#4\\else##1\\fi}}%
    \\vspace{-0.8\\baselineskip}
    \\begin{addmargin}[1em]{1em}
  }{%
    \\end{addmargin}
    \\vspace{-0.5\\baselineskip}
  }%
}
"</span>
  <span class="org-doc">"Preamble that provides a macro for custom boxes."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org90432aa" class="outline-5">
<h5 id="org90432aa">Conditional features</h5>
<div class="outline-text-5" id="text-org90432aa">
<p>
Don&rsquo;t always need everything in LaTeX, so only add it what we need when we need it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-italic-quotes</span> t
  <span class="org-doc">"Make \"quote\" environments italic."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-par-sep</span> t
  <span class="org-doc">"Vertically seperate paragraphs, and remove indentation."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-conditional-features</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">file</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">https?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">+?\\.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">eps</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">pdf</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">png</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpeg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jbig2</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\]\\]"</span> . image<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">file</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">https?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\.svg\\]\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\includesvg"</span> . svg<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*|"</span> . table<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cref:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\cref{</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\[\\[[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\\]]+\\]\\]"</span> . cleveref<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"[;\\\\]?\\b[A-Z][A-Z]+s?[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">A-Za-z]"</span> . acronym<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\+[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ].*[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]\\+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">_[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ].*[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]_</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\uu?line</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\uwave</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\sout</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\xout</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\dashuline</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\dotuline</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\markoverwith"</span> . underline<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">":float wrap"</span> . float-wrap<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">":float sideways"</span> . rotate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+caption:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\caption"</span> . caption<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\[\\[xkcd:"</span> . <span class="org-rainbow-delimiters-depth-4">(</span>image caption<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-variable-name">org-latex-italic-quotes</span> <span class="org-string">"^[ \t]*#\\+begin_quote</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{quote}"</span><span class="org-rainbow-delimiters-depth-4">)</span> . italic-quotes<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-variable-name">org-latex-par-sep</span> . par-sep<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[-+*]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">[0-9]+[.)]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">[A-Za-z]+[.)]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"> \\[[ -X]\\]"</span> . checkbox<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_warning</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{warning}"</span> . box-warning<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_info</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{info}"</span>       . box-info<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_success</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{success}"</span> . box-success<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"^[ \t]*#\\+begin_error</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\\\begin{error}"</span>     . box-error<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Org feature tests and associated LaTeX feature flags.

Alist where the car is a test for the presense of the feature,
and the cdr is either a single feature symbol or list of feature symbols.

When a string, it is used as a regex search in the buffer.
The feature is registered as present when there is a match.

The car can also be a
- symbol, the value of which is fetched
- function, which is called with info as an argument
- list, which is `</span><span class="org-doc"><span class="org-constant">eval</span></span><span class="org-doc">'uated

If the symbol, function, or list produces a string: that is used as a regex
search in the buffer. Otherwise any non-nil return value will indicate the
existance of the feature."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">org-latex-feature-implementations</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>image         <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{graphicx}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>svg           <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{svg}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>table         <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{longtable}\n\\usepackage{booktabs}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>cleveref      <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage[capitalize]{cleveref}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>underline     <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage[normalem]{ulem}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>float-wrap    <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{wrapfig}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>rotate        <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{rotating}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>caption       <span class="org-builtin">:snippet</span> <span class="org-variable-name">org-latex-caption-preamble</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2.1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>acronym       <span class="org-builtin">:snippet</span> <span class="org-string">"\\newcommand{\\acr}[1]{\\protect\\textls*[110]{\\scshape #1}}\n\\newcommand{\\acrs}{\\protect\\scalebox{.91}[.84]{\\hspace{0.15ex}s}}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>italic-quotes <span class="org-builtin">:snippet</span> <span class="org-string">"\\renewcommand{\\quote}{\\list{}{\\rightmargin\\leftmargin}\\item\\relax\\em}\n"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>par-sep       <span class="org-builtin">:snippet</span> <span class="org-string">"\\setlength{\\parskip}{\\baselineskip}\n\\setlength{\\parindent}{0pt}\n"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>.pifont       <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{pifont}"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>checkbox      <span class="org-builtin">:requires</span> .pifont <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">3</span>
                   <span class="org-builtin">:snippet</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">memq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">maths</span> features<span class="org-rainbow-delimiters-depth-2">)</span>
                                      <span class="org-string">"\\usepackage{amssymb} % provides \\square"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                    <span class="org-variable-name">org-latex-checkbox-preamble</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>.fancy-box    <span class="org-builtin">:requires</span> .pifont    <span class="org-builtin">:snippet</span> <span class="org-variable-name">org-latex-box-preamble</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">3.9</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-warning   <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{warning}{e66100}{\\ding{68}}{Warning}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-info      <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{info}{3584e4}{\\ding{68}}{Information}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-success   <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{success}{26a269}{\\ding{68}}{\\vspace{-\\baselineskip}}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>box-error     <span class="org-builtin">:requires</span> .fancy-box <span class="org-builtin">:snippet</span> <span class="org-string">"\\defsimplebox{error}{c01c28}{\\ding{68}}{Important}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"LaTeX features and details required to implement them.

List where the car is the feature symbol, and the rest forms a plist with the
following keys:
- :snippet, which may be either
  - a string which should be included in the preamble
  - a symbol, the value of which is included in the preamble
  - a function, which is evaluated with the list of feature flags as its
    single argument. The result of which is included in the preamble
  - a list, which is passed to `</span><span class="org-doc"><span class="org-constant">eval</span></span><span class="org-doc">', with a list of feature flags available
    as \"features\"

- :requires, a feature or list of features that must be available
- :when, a feature or list of features that when all available should cause this
    to be automatically enabled.
- :prevents, a feature or list of features that should be masked
- :order, for when ordering is important. Lower values appear first.
    The default is 0.

Features that start with ! will be eagerly loaded, i.e. without being detected."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
First, we need to detect which features we actually need
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-detect-features</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> buffer info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"List features from `</span><span class="org-doc"><span class="org-constant">org-latex-conditional-features</span></span><span class="org-doc">' detected in BUFFER."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">case-fold-search</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> buffer <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">current-buffer</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">delete-dups</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">mapcan</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>construct-feature<span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>out <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred stringp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred functionp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span> info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred listp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">eval</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>pred symbolp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">symbol-value</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                    <span class="org-rainbow-delimiters-depth-4">(</span>_ <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">user-error</span> <span class="org-string">"org-latex-conditional-features key %s unable to be used"</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                         <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">stringp</span> out<span class="org-rainbow-delimiters-depth-2">)</span>
                             <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">goto-char</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">point-min</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">re-search-forward</span> out nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                           out<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">listp</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> construct-feature<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
               <span class="org-variable-name">org-latex-conditional-features</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Then we need to expand them and sort them according to the above definitions
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-expand-features</span> <span class="org-rainbow-delimiters-depth-2">(</span>features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"For each feature in FEATURES process :requires, :when, and :prevents keywords and sort according to :order."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>feature features<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">error</span> <span class="org-string">"Feature %s not provided in org-latex-feature-implementations"</span> feature<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> current features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> current
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>requirements <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assq</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> current<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:requires</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">setcdr</span> current <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">listp</span> requirements<span class="org-rainbow-delimiters-depth-2">)</span>
                          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">append</span> requirements <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cons</span> requirements <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> current <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> current<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>potential-feature
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">append</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">delq</span> nil <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">mapcar</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>feat<span class="org-rainbow-delimiters-depth-4">)</span>
                                                <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> feat<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:eager</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                                  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> feat<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                              <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>prerequisites <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> potential-feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:when</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setf</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">listp</span> prerequisites<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">cl-every</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>preq<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">memq</span> preq features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> prerequisites<span class="org-rainbow-delimiters-depth-3">)</span>
                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">memq</span> prerequisites features<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                         <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">append</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> potential-feature<span class="org-rainbow-delimiters-depth-3">)</span> features<span class="org-rainbow-delimiters-depth-2">)</span>
                       <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">delq</span> potential-feature features<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>feature features<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>prevents <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:prevents</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setf</span> features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">cl-set-difference</span> features <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">listp</span> prevents<span class="org-rainbow-delimiters-depth-3">)</span> prevents <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> prevents<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">sort</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">delete-dups</span> features<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>feat1 feat2<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">&lt;</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> feat1 <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:order</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">assoc</span> feat2 <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-builtin">:order</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
              t nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Finally, we can create the preamble to be inserted
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-latex-generate-features-preamble</span> <span class="org-rainbow-delimiters-depth-2">(</span>features<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generate the LaTeX preamble content required to provide FEATURES.
This is done according to `</span><span class="org-doc"><span class="org-constant">org-latex-feature-implementations</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>expanded-features <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex-expand-features</span> features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"\n%% features: %s\n"</span> expanded-features<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mapconcat</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>feature<span class="org-rainbow-delimiters-depth-2">)</span>
                  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when-let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>snippet <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">cdr</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">assoc</span> feature <span class="org-variable-name">org-latex-feature-implementations</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-builtin">:snippet</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">concat</span>
                     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">pcase</span> snippet
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred stringp<span class="org-rainbow-delimiters-depth-2">)</span> snippet<span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred functionp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">funcall</span> snippet features<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred listp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">eval</span> <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>features <span class="org-highlight-quoted-quote">'</span>,features<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>,@snippet<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>pred symbolp<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">symbol-value</span> snippet<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span>_ <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">user-error</span> <span class="org-string">"org-latex-feature-implementations :snippet value %s unable to be used"</span> snippet<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                     <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                expanded-features
                <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"% end features\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Last step, some advice to hook in all of the above to work
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">info--tmp</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-save-info <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">info</span> <span class="org-type">&amp;optional</span> t_ s_<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:before</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-make-preamble</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">info--tmp</span> info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-splice-latex-header-and-generated-preamble-a <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn tpl def-pkg pkg snippets-p <span class="org-type">&amp;optional</span> extra<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Dynamically insert preamble content based on `</span><span class="org-doc"><span class="org-constant">org-latex-conditional-preambles</span></span><span class="org-doc">'."</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-splice-latex-header</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>header <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn tpl def-pkg pkg snippets-p extra<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> snippets-p header
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> header
              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">org-latex-generate-features-preamble</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-latex-detect-features</span> nil <span class="org-variable-name">info--tmp</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
              <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org30592f3" class="outline-5">
<h5 id="org30592f3">Tectonic</h5>
<div class="outline-text-5" id="text-org30592f3">
<p>
Tectonic is the hot new thing, which also means I can get rid of my tex installation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> <span class="org-variable-name">org-latex-pdf-process</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"tectonic -Z shell-escape --outdir=%o %f"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org619eccb" class="outline-5">
<h5 id="org619eccb">Classes</h5>
<div class="outline-text-5" id="text-org619eccb">
<p>
Add some saner defaults for them
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> ox-latex
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-tables-booktabs</span> t
        <span class="org-variable-name">org-latex-hyperref-template</span> <span class="org-string">"\\colorlet{greenyblue}{blue!70!green}
\\colorlet{blueygreen}{blue!40!green}
\\providecolor{link}{named}{greenyblue}
\\providecolor{cite}{named}{blueygreen}
\\hypersetup{
  pdfauthor={%a},
  pdftitle={%t},
  pdfkeywords={%k},
  pdfsubject={%d},
  pdfcreator={%c},
  pdflang={%L},
  breaklinks=true,
  colorlinks=true,
  linkcolor=,
  urlcolor=link,
  citecolor=cite\n}
\\urlstyle{same}
"</span>
        <span class="org-variable-name">org-latex-reference-command</span> <span class="org-string">"\\cref{%s}"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5213d45" class="outline-5">
<h5 id="org5213d45">Packages</h5>
<div class="outline-text-5" id="text-org5213d45">
<p>
Add some packages (also very likely to change)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-default-packages-alist</span>
      <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"AUTO"</span> <span class="org-string">"inputenc"</span> t <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"pdflatex"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"T1"</span> <span class="org-string">"fontenc"</span> t <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"pdflatex"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"fontspec"</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"xcolor"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> <span class="org-string">"hyperref"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org687ae0c" class="outline-5">
<h5 id="org687ae0c">Pretty code blocks</h5>
<div class="outline-text-5" id="text-org687ae0c">
<p>
Teco is the goto for this, so basically just ripping off him.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> engrave-faces
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"tecosaur/engrave-faces"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> engrave-faces-latex
  <span class="org-builtin">:after</span> ox-latex
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-listings</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> engrave-faces-html
  <span class="org-builtin">:after</span> ox-html
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-latex-listings</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar-local</span> <span class="org-variable-name">org-export-has-code-p</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-export-expect-no-code <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:before</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-export-as</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-export-has-code-p</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-export-register-code <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-src-block</span>
  <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-inline-src-block-engraved</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-export-has-code-p</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice!</span> org-latex-example-block-engraved <span class="org-rainbow-delimiters-depth-2">(</span>orig-fn example-block contents info<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">org-latex-example-block</span></span><span class="org-doc">', but supporting an engraved backend"</span>
  <span class="org-builtin">:around</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-latex-example-block</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>output-block <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">funcall</span> orig-fn example-block contents info<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">engraved</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:latex-listings</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"\\begin{Code}[alt]\n%s\n\\end{Code}"</span> output-block<span class="org-rainbow-delimiters-depth-4">)</span>
      output-block<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd69c671" class="outline-5">
<h5 id="orgd69c671">ox-chameleon</h5>
<div class="outline-text-5" id="text-orgd69c671">
<p>
Chameleons are cool, not having to touches faces is cooler (not the COVID kind)
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> ox-chameleon
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"tecosaur/ox-chameleon"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> ox-chameleon
  <span class="org-builtin">:after</span> ox<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8b0605" class="outline-5">
<h5 id="orgb8b0605">Beamer</h5>
<div class="outline-text-5" id="text-orgb8b0605">
<p>
Starting to look into beamer for creating presentations, seems like we need to <del>steal</del> borrow more config from Tecosaur.
</p>

<p>
Metropolis is a nice theme, with a tiny adjustment it might be the best.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-beamer-theme</span> <span class="org-string">"[progressbar=foot]metropolis"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-beamer-p</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">info</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">eq</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">beamer</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:back-end</span><span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">org-export-backend-name</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">plist-get</span> info <span class="org-builtin">:back-end</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-conditional-features</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>org-beamer-p . beamer<span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-feature-implementations</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>beamer <span class="org-builtin">:requires</span> .missing-koma <span class="org-builtin">:prevents</span> <span class="org-rainbow-delimiters-depth-3">(</span>italic-quotes condensed-lists<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">org-latex-feature-implementations</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>.missing-koma <span class="org-builtin">:snippet</span> <span class="org-string">"\\usepackage{scrextend}"</span> <span class="org-builtin">:order</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
And lastly, a small tweak to improve how sections are divided
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-beamer-frame-level</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org83f4e20" class="outline-4">
<h4 id="org83f4e20">(sub|super)script characters</h4>
<div class="outline-text-4" id="text-org83f4e20">
<p>
Annoying having to gate these, so let&rsquo;s fix that
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">org-export-with-sub-superscripts</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">{}</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d6e996" class="outline-4">
<h4 id="org1d6e996">Auto-export</h4>
<div class="outline-text-4" id="text-org1d6e996">
<p>
Defines a minor mode I can use to automatically export a PDF on save.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+org-auto-export</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">org-beamer-export-to-pdf</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-variable-name">org-auto-export-mode</span>
  <span class="org-doc">"Toggle auto exporting the Org file."</span>
  <span class="org-builtin">:global</span> nil
  <span class="org-builtin">:lighter</span> <span class="org-string">""</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-variable-name">org-auto-export-mode</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">When the mode is enabled
</span>      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">after-save-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+org-auto-export</span> <span class="org-builtin">:append</span> <span class="org-builtin">:local</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">When the mode is disabled
</span>    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">remove-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">after-save-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">+org-auto-export</span> <span class="org-builtin">:local</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1cbe3d2" class="outline-3">
<h3 id="org1cbe3d2">org-protocol</h3>
<div class="outline-text-3" id="text-org1cbe3d2">
<p>
Interact with org-mode from other applications, <i>including my web browser</i>. Being
able to create things like tasks and other org items from anywhere sounds ideal.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> org-protocol
  <span class="org-builtin">:defer</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">DO NOT EDIT THIS
</span><span class="org-comment-delimiter"># </span><span class="org-comment">I have been generated from nil
</span><span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">Desktop Entry</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">Name</span>=org-protocol
<span class="org-variable-name">Comment</span>=Intercept calls from emacsclient to trigger custom actions
<span class="org-variable-name">Categories</span>=Other;
<span class="org-variable-name">Keywords</span>=org-protocol;
<span class="org-variable-name">Icon</span>=emacs
<span class="org-variable-name">Type</span>=Application
<span class="org-variable-name">Exec</span>=emacsclient -- %u
<span class="org-variable-name">Terminal</span>=false
<span class="org-variable-name">StartupWMClass</span>=Emacs
<span class="org-variable-name">MimeType</span>=x-scheme-handler/org-protocol;
</pre>
</div>
</div>
</div>
</section>

<section id="outline-container-orgfc0b961" class="outline-2">
<h2 id="orgfc0b961">Languages</h2>
<div class="outline-text-2" id="text-orgfc0b961">
<p>
Configuration for various programming languages.
</p>
</div>

<div id="outline-container-org49134b6" class="outline-3">
<h3 id="org49134b6">Clojure</h3>
<div class="outline-text-3" id="text-org49134b6">
</div>
<div id="outline-container-orgb9fed33" class="outline-4">
<h4 id="orgb9fed33">Epithet</h4>
<div class="outline-text-4" id="text-orgb9fed33">
<p>
Buffers are pretty great, but sometimes they can be named &#x2026; less usefully.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> epithet
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"oantolin/epithet"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> epithet
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">clojure-mode</span> . epithet-rename-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq-hook! 'clojure-mode-hook doom-modeline-buffer-file-name-style 'buffer-name)
</span>  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">epithet-for-clojure</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Suggest a name for a `</span><span class="org-doc"><span class="org-constant">clojure-mode</span></span><span class="org-doc">' buffer."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">cider</span> nil t<span class="org-rainbow-delimiters-depth-1">)</span>
               <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">derived-mode-p</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">clojure-mode</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">after!</span> doom-modeline
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-local</span> doom-modeline-buffer-file-name-style <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">buffer-name</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span>
       <span class="org-string">"%s &lt;%s&gt;"</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">substring-no-properties</span> <span class="org-rainbow-delimiters-depth-2">(</span>cider-current-ns<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">projectile-project-name</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">add-to-list</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">epithet-suggesters</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">epithet-for-clojure</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">after!</span> doom-modeline
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">advice-add</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">epithet-rename-buffer</span> <span class="org-builtin">:after</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">doom-modeline-update-buffer-file-name</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd63438b" class="outline-4">
<h4 id="orgd63438b">Portal</h4>
<div class="outline-text-4" id="text-orgd63438b">
<p>
This portal thing looks pretty cool yanno.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">lkn/clj-portal-viewers</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">":portal.viewer/inspector"</span>
                                 <span class="org-string">":portal.viewer/pprint"</span>
                                 <span class="org-string">":portal.viewer/table"</span>
                                 <span class="org-string">":portal.viewer/tree"</span>
                                 <span class="org-string">":portal.viewer/hiccup"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/clj-start-of-sexp</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>paredit-backward-up<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/clj-end-of-sexp</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>paredit-forward-up<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">point</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/portal-open</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>cider-nrepl-sync-request:eval
   <span class="org-string">"(do (ns dev) (def portal ((requiring-resolve 'portal.api/open) {:launcher :emacs})) (add-tap (requiring-resolve 'portal.api/submit)))"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/portal-clear</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>cider-nrepl-sync-request:eval <span class="org-string">"(portal.api/clear)"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/portal-close</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>cider-nrepl-sync-request:eval <span class="org-string">"portal.api/close"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/portal-tap-contained</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> viewer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">consp</span> <span class="org-variable-name">current-prefix-arg</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">completing-read</span> <span class="org-string">"Default Viewer: "</span> <span class="org-variable-name">lkn/clj-portal-viewers</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>beg <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">lkn/clj-start-of-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>end <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">lkn/clj-end-of-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>cider-interactive-eval
   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">format</span> <span class="org-string">"(tap&gt; ^{:portal.viewer/default %s} %s)"</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> viewer <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">car</span> <span class="org-variable-name">lkn/clj-portal-viewers</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">buffer-substring-no-properties</span> beg end<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">lkn/portal-tap-last</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> viewer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">consp</span> <span class="org-variable-name">current-prefix-arg</span><span class="org-rainbow-delimiters-depth-1">)</span>
                       <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">completing-read</span> <span class="org-string">"Default Viewer: "</span> <span class="org-variable-name">lkn/clj-portal-viewers</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>cider-interactive-eval
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">format</span> <span class="org-string">"(tap&gt; ^{:portal.viewer/default %s} %s)"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> viewer <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">car</span> <span class="org-variable-name">lkn/clj-portal-viewers</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cider-last-sexp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:map</span> <span class="org-rainbow-delimiters-depth-2">(</span>clojure-mode-map clojurescript-mode-map clojurec-mode-map<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-builtin">:localleader</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:prefix</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"p p"</span> . <span class="org-string">"Portal"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-builtin">:desc</span> <span class="org-string">"Open Portal"</span>
        <span class="org-string">"o"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">lkn/portal-open</span>
        <span class="org-builtin">:desc</span> <span class="org-string">"Clear layers"</span>
        <span class="org-string">"c"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">lkn/portal-clear</span>
        <span class="org-builtin">:desc</span> <span class="org-string">"Close current session"</span>
        <span class="org-string">"q"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">lkn/portal-close</span>
        <span class="org-builtin">:desc</span> <span class="org-string">"Send sexp around point"</span>
        <span class="org-string">"s"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">lkn/portal-tap-contained</span>
        <span class="org-builtin">:desc</span> <span class="org-string">"Send sexp next to point"</span>
        <span class="org-string">"S"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">lkn/portal-tap-last</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd42ea67" class="outline-3">
<h3 id="orgd42ea67">Lua</h3>
<div class="outline-text-3" id="text-orgd42ea67">
<p>
First things first; we need a project mode for my awesomewm config.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">def-project-mode!</span> <span class="org-variable-name">+awesome-config-mode</span>
  <span class="org-builtin">:modes</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>lua-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:files</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"rc.lua"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">string-prefix-p</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"awesome"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">xdg-config-home</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-variable-name">default-directory</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">add-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">+awesome-config-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">rainbow-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3523f14" class="outline-3">
<h3 id="org3523f14">LSP/DAP</h3>
<div class="outline-text-3" id="text-org3523f14">
</div>
<div id="outline-container-org2dbca38" class="outline-4">
<h4 id="org2dbca38">Increase variable line length</h4>
<div class="outline-text-4" id="text-org2dbca38">
<p>
By default this is <i>way</i> too short.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> dap-ui-variable-length <span class="org-highlight-numbers-number">200</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org889d378" class="outline-4">
<h4 id="org889d378">Improve completions</h4>
<div class="outline-text-4" id="text-org889d378">
<p>
The default completions are quite bad
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> lsp-mode
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">+lsp-company-backends</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:separate</span> company-capf company-yasnippet company-dabbrev<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</section>

<section id="outline-container-org6d1751d" class="outline-2">
<h2 id="org6d1751d">Snippets</h2>
<div class="outline-text-2" id="text-org6d1751d">
<p>
I constantly find myself complaining I don&rsquo;t have snippets setup, and yet I
always forget to set snippets up. <a href="https://www.youtube.com/watch?v=sc5iTNVEOAg">My own worst enemy</a>? Probably. But who&rsquo;s
keeping score&#x2026;
</p>
</div>

<div id="outline-container-org6f7f65d" class="outline-3">
<h3 id="org6f7f65d">Snippet definitions</h3>
<div class="outline-text-3" id="text-org6f7f65d">
<p>
A collection of snippets tangled using clever magic.
</p>
</div>

<div id="outline-container-orge579f2c" class="outline-4">
<h4 id="orge579f2c">Org-mode</h4>
<div class="outline-text-4" id="text-orge579f2c">
</div>
<div id="outline-container-orgf058329" class="outline-5">
<h5 id="orgf058329">__</h5>
<div class="outline-text-5" id="text-orgf058329">
<div class="org-src-container">
<pre class="src src-snippet"><span class="org-comment"># -*- mode: snippet -*-</span>
<span class="org-comment"># name: Org template</span>
<span class="org-comment"># --</span>
#+title: $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-warning">1</span>:<span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>s-titleized-words <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"^[0-9]\\{4\\}-[0-9][0-9]-[0-9][0-9]-"</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-4">(</span>file-name-base <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">or</span> buffer-file-name <span class="org-string">"new buffer"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-highlight-quoted-quote">`</span><span class="org-keyword"><span class="org-rainbow-delimiters-depth-1">}</span></span>
#+author: $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-warning">2</span>:<span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>user-full-name<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-highlight-quoted-quote">`</span><span class="org-keyword"><span class="org-rainbow-delimiters-depth-1">}</span></span>
#+date: $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-warning">3</span>:<span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-2">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-highlight-quoted-quote">`</span><span class="org-keyword"><span class="org-rainbow-delimiters-depth-1">}</span></span>
<span class="org-comment">#+latex_class: chameleon</span>

<span class="org-keyword">$</span><span class="org-string">0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2c6d0e6" class="outline-4">
<h4 id="org2c6d0e6">slack-message-compose-buffer-mode</h4>
<div class="outline-text-4" id="text-org2c6d0e6">
</div>
<div id="outline-container-orge291dc1" class="outline-5">
<h5 id="orge291dc1">standup</h5>
<div class="outline-text-5" id="text-orge291dc1">
<div class="org-src-container">
<pre class="src src-snippet"><span class="org-comment"># -*- mode: snippet -*-</span>
<span class="org-comment"># name: Standup template</span>
<span class="org-comment"># --</span>
*Standup*

<span class="org-keyword">$</span><span class="org-string">1</span>: <span class="org-keyword">$</span><span class="org-string">2</span>
<span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-1">(</span>format-time-string <span class="org-string">"%d/%m/%y"</span> <span class="org-rainbow-delimiters-depth-2">(</span>current-time<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-highlight-quoted-quote">`</span>: <span class="org-keyword">$</span><span class="org-string">3</span>

*Blocked*: <span class="org-keyword">$</span><span class="org-string">4</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</section>

<section id="outline-container-orgcef55a8" class="outline-2">
<h2 id="orgcef55a8">Packages</h2>
<div class="outline-text-2" id="text-orgcef55a8">
<p>
Place to put packages that don&rsquo;t have a guaranteed home yet.
</p>
</div>

<div id="outline-container-orgd68487f" class="outline-3">
<h3 id="orgd68487f">Disabled/unpin</h3>
<div class="outline-text-3" id="text-orgd68487f">
<p>
Packages to be unpinned or just completely disabled
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">disable-packages!</span> evil-escape<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> apheleia
 <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:local-repo</span> <span class="org-string">"~/build/elisp/apheleia"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> engrave-faces
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/engrave-faces"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> ox-chameleon
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/ox-chameleon"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> forge
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/forge"</span> <span class="org-builtin">:branch</span> <span class="org-string">"feat/forge-max-topics"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b0dc54" class="outline-3">
<h3 id="org8b0dc54">embark-vc</h3>
<div class="outline-text-3" id="text-org8b0dc54">
<p>
Embark additions to improve various vc operations
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> embark-vc<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> embark-vc
  <span class="org-builtin">:after</span> embark<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdd4582b" class="outline-3">
<h3 id="orgdd4582b">prescient</h3>
<div class="outline-text-3" id="text-orgdd4582b">
<p>
Need to add this into company module when I&rsquo;ve tested
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">modulep!</span> <span class="org-builtin">:completion</span> company<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">package!</span> company-prescient<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">modulep!</span> <span class="org-builtin">:completion</span> company<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">use-package!</span> company-prescient
    <span class="org-builtin">:after</span> company
    <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-3">(</span>company-mode . company-prescient-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-3">(</span>company-prescient-mode . prescient-persist-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:config</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> prescient-save-file <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">concat</span> <span class="org-variable-name">doom-cache-dir</span> <span class="org-string">"prescient-save.el"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-variable-name">history-length</span> <span class="org-highlight-numbers-number">1000</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org24b5ae8" class="outline-3">
<h3 id="org24b5ae8">Rainbow Identifiers</h3>
<div class="outline-text-3" id="text-org24b5ae8">
</div>
<div id="outline-container-org176670e" class="outline-4">
<h4 id="org176670e"><span class="todo TODO">TODO</span> Fix in web-mode</h4>
<div class="outline-text-4" id="text-org176670e">
<p>
Web-mode has normal text which should be ignored.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> rainbow-identifiers<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> rainbow-identifiers
  <span class="org-comment-delimiter">;; </span><span class="org-comment">:hook (php-mode . rainbow-identifiers-mode)
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">:hook (org-mode . (lambda () (rainbow-identifiers-mode -1)))
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">:hook (web-mode . (lambda () (rainbow-identifiers-mode -1)))
</span>  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">rainbow-identifiers-faces-to-override</span>
        <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-3">(</span>php-variable-name
          php-property-name
          php-variable-sigil
          web-mode-variable-name-face<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org69dbce7" class="outline-3">
<h3 id="org69dbce7">Cucumber</h3>
<div class="outline-text-3" id="text-org69dbce7">
<p>
Needed for feature test files
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> feature-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> feature-mode
  <span class="org-builtin">:mode</span> <span class="org-string">"\\.feature$"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3585308" class="outline-3">
<h3 id="org3585308">RPM Spec</h3>
<div class="outline-text-3" id="text-org3585308">
<p>
Needed for rpm files to not be treated poorly (there, there)
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> rpm-spec-mode
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"bhavin192/rpm-spec-mode"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> rpm-spec-mode
  <span class="org-builtin">:mode</span> <span class="org-string">"\\.spec</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\.in</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?$"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c4de7d" class="outline-3">
<h3 id="org5c4de7d">Autothemer</h3>
<div class="outline-text-3" id="text-org5c4de7d">
<p>
Needed for a very WIP theme, otherwise not needed.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> autothemer<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1ae943" class="outline-3">
<h3 id="orgf1ae943">Bamboo</h3>
<div class="outline-text-3" id="text-orgf1ae943">
<p>
Setup for my package for integrating with Bamboo HR
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> bhr
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/bhr.el"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> bhr
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">bhr-view-timesheet</span> bhr-submit-multiple<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd92966d" class="outline-3">
<h3 id="orgd92966d">YADM</h3>
<div class="outline-text-3" id="text-orgd92966d">
<p>
<a href="https://yadm.io">yadm</a> is my preferred dotfile manager of choice, but by default because of the nature of how the repo is handled; it&rsquo;s quite a pain to manage from Emacs.
</p>
</div>

<div id="outline-container-orgd10c9ea" class="outline-4">
<h4 id="orgd10c9ea">tramp-yadm</h4>
<div class="outline-text-4" id="text-orgd10c9ea">
<p>
tramp-yadm to the rescue! This lets me use magit &amp; projectile as expected on the repo; allowing me to manage dotfile changes with the superior git client.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> tramp-yadm
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"seanfarley/tramp-yadm"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> tramp-yadm
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">yadm-status</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Invoke magit on the yadm repo"</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">magit-status</span> <span class="org-string">"/yadm::~"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">magit-git-executable</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">executable-find</span> <span class="org-string">"yadm"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> <span class="org-variable-name">magit-remote-git-executable</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">executable-find</span> <span class="org-string">"yadm"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">after!</span> magit
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">tramp-yadm-register</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:leader</span> <span class="org-builtin">:desc</span> <span class="org-string">"Open yadm status"</span> <span class="org-string">"g p"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">yadm-status</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6685a59" class="outline-3">
<h3 id="org6685a59">Keychain</h3>
<div class="outline-text-3" id="text-org6685a59">
<p>
<a href="http://www.funtoo.org/wiki/Keychain">Keychain</a> is <i>amazing</i>. It wraps ssh-agent and gpg-agent so I never have to.
</p>

<p>
The <i>problem</i> is Emacs doesn&rsquo;t always detect it nicely &#x2026; until now!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">doom-init-ui</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+keychain-startup-hook</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Load keychain env after emacs"</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>ssh <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">shell-command-to-string</span> <span class="org-string">"keychain -q --noask --agents ssh --eval"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
           <span class="org-rainbow-delimiters-depth-1">(</span>gpg <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">shell-command-to-string</span> <span class="org-string">"keychain -q --noask --agents gpg --eval"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">list</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> ssh
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string-match</span> <span class="org-string">"SSH_AUTH_SOCK[=\s]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\s;\n]*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> ssh<span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">setenv</span>       <span class="org-string">"SSH_AUTH_SOCK"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">match-string</span> <span class="org-highlight-numbers-number">1</span> ssh<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> ssh
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string-match</span> <span class="org-string">"SSH_AGENT_PID[=\s]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?"</span> ssh<span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">setenv</span>       <span class="org-string">"SSH_AGENT_PID"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">match-string</span> <span class="org-highlight-numbers-number">1</span> ssh<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
            <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> gpg
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">string-match</span> <span class="org-string">"GPG_AGENT_INFO[=\s]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\s;\n]*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> gpg<span class="org-rainbow-delimiters-depth-2">)</span>
                 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">setenv</span>       <span class="org-string">"GPG_AGENT_INFO"</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">match-string</span> <span class="org-highlight-numbers-number">1</span> gpg<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3635b6d" class="outline-3">
<h3 id="org3635b6d">Asciidoc</h3>
<div class="outline-text-3" id="text-org3635b6d">
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> adoc-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org587a0ae" class="outline-3">
<h3 id="org587a0ae">Graphviz</h3>
<div class="outline-text-3" id="text-org587a0ae">
<p>
Some config to help with graphviz
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> graphviz-dot-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> graphviz-dot-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">after!</span> company
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">company-graphviz-dot</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff668cd" class="outline-3">
<h3 id="orgff668cd">Exercism</h3>
<div class="outline-text-3" id="text-orgff668cd">
<p>
Exercism is a useful site for learning a programming language by performing
various exercises. You can opt to use either an in-browser editor or your own
via a local CLI.
</p>

<p>
Which do you think I want?
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> exercism-modern
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:files</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:defaults</span> <span class="org-string">"icons"</span><span class="org-rainbow-delimiters-depth-3">)</span>
           <span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"elken/exercism-modern"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> exercism-modern
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">exercism-modern-jump</span> exercism-modern-view-tracks<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd74d67e" class="outline-3">
<h3 id="orgd74d67e">litable</h3>
<div class="outline-text-3" id="text-orgd74d67e">
<p>
This is literally the coolest package ever&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> litable
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"Fuco1/litable"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> litable
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-variable-name">litable-list-file</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">"litable-lists.el"</span> <span class="org-variable-name">doom-cache-dir</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">map!</span> <span class="org-builtin">:localleader</span>
        <span class="org-builtin">:map</span> <span class="org-variable-name">emacs-lisp-mode-map</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:prefix</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"t"</span> . <span class="org-string">"toggle"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-string">"l"</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-variable-name">litable-mode</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</section>

<section id="outline-container-org31774cf" class="outline-2">
<h2 id="org31774cf">Spelling</h2>
<div class="outline-text-2" id="text-org31774cf">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ispell-program-name <span class="org-string">"aspell"</span>
      ispell-extra-args <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"--sug-mode=ultra"</span> <span class="org-string">"--lang=en_GB"</span><span class="org-rainbow-delimiters-depth-2">)</span>
      ispell-dictionary <span class="org-string">"en"</span>
      <span class="org-variable-name">ispell-personal-dictionary</span> <span class="org-string">"~/Nextcloud/dict"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">after!</span> cape
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> <span class="org-variable-name">cape-dict-file</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">file-exists-p</span> <span class="org-variable-name">ispell-personal-dictionary</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-variable-name">ispell-personal-dictionary</span> <span class="org-variable-name">cape-dict-file</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</section>

<section id="outline-container-org0f8d36a" class="outline-2">
<h2 id="org0f8d36a">Local settings</h2>
<div class="outline-text-2" id="text-org0f8d36a">
<p>
Needed some way to manage settings for a local machine, so let&rsquo;s be lazy with it
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">file-exists-p!</span> <span class="org-string">"config-local.el"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">load!</span> <span class="org-string">"config-local.el"</span> <span class="org-variable-name">doom-private-dir</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-org76407c0" class="outline-3">
<h3 id="org76407c0">dotenv</h3>
<div class="outline-text-3" id="text-org76407c0">
<p>
Better handle setting of environment variables needed for various tools
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">package!</span> dotenv
  <span class="org-builtin">:recipe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"pkulev/dotenv.el"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package!</span> dotenv
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">file-exists-p</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">expand-file-name</span> <span class="org-string">".env"</span> <span class="org-variable-name">doom-user-dir</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-variable-name">doom-init-ui-hook</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+dotenv-startup-hook</span> <span class="org-rainbow-delimiters-depth-1">()</span>
        <span class="org-doc">"Load .env after starting emacs"</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-function-name">dotenv-update-project-env</span> <span class="org-variable-name">doom-user-dir</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">add-hook!</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">projectile-after-switch-project-hook</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">+dotenv-projectile-hook</span> <span class="org-rainbow-delimiters-depth-4">()</span>
      <span class="org-doc">"Load .env after changing projects."</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-function-name">dotenv-update-project-env</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">projectile-project-root</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</section>
</main>
<footer id="postamble" class="status">
<p class="author">Author: Ellis Kenyő</p>
<p class="date">Created: 2023-04-30</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.6.1)</p>
</footer>
</body>
</html>